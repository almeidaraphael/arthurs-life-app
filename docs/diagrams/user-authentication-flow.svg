<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="4138px" preserveAspectRatio="none" style="width:2292px;height:4138px;background:#FFFFFF;" version="1.1" viewBox="0 0 2292 4138" width="2292px" zoomAndPan="magnify"><title>Arthur's Life App - User Authentication Flow</title><defs/><g><text fill="#000000" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="549.0225" x="870.2673" y="35.4209">Arthur's Life App - User Authentication Flow</text><rect fill="#FFFFFF" height="206.7344" style="stroke:#000000;stroke-width:1;" width="1724.8027" x="56" y="334.7031"/><rect fill="#FFFFFF" height="102.2031" style="stroke:none;stroke-width:1;" width="1724.8027" x="56" y="439.2344"/><rect fill="#FFFFFF" height="586.1328" style="stroke:#000000;stroke-width:1;" width="2078.8687" x="133.6748" y="1047.4297"/><rect fill="#FFFFFF" height="322.9375" style="stroke:none;stroke-width:1;" width="2078.8687" x="133.6748" y="1310.625"/><rect fill="#FFFFFF" height="206.7344" style="stroke:#000000;stroke-width:1;" width="1869.2437" x="143.6748" y="1419.8281"/><rect fill="#FFFFFF" height="131.3359" style="stroke:none;stroke-width:1;" width="1869.2437" x="143.6748" y="1495.2266"/><rect fill="#FFFFFF" height="323.2656" style="stroke:#000000;stroke-width:1;" width="1869.2437" x="143.6748" y="1871.4922"/><rect fill="#FFFFFF" height="131.3359" style="stroke:none;stroke-width:1;" width="1869.2437" x="143.6748" y="2063.4219"/><rect fill="#FFFFFF" height="265" style="stroke:#000000;stroke-width:1;" width="2068.8687" x="143.6748" y="2329.1563"/><rect fill="#FFFFFF" height="218.7344" style="stroke:none;stroke-width:1;" width="2068.8687" x="143.6748" y="2375.4219"/><rect fill="#FFFFFF" height="133.6641" style="stroke:#000000;stroke-width:1;" width="1869.2437" x="143.6748" y="3052.8828"/><rect fill="#FFFFFF" height="206.7344" style="stroke:#000000;stroke-width:1;" width="1724.8027" x="56" y="3366.2109"/><rect fill="#FFFFFF" height="102.2031" style="stroke:none;stroke-width:1;" width="1724.8027" x="56" y="3470.7422"/><g><title>Child User</title><rect fill="#000000" fill-opacity="0.00000" height="3927.8984" width="8" x="100.8374" y="128.9063"/><line style="stroke:#000000;stroke-width:1;" x1="104" x2="104" y1="128.9063" y2="4056.8047"/></g><g><title>Parent.Caregiver</title><rect fill="#000000" fill-opacity="0.00000" height="3927.8984" width="8" x="211.9868" y="128.9063"/><line style="stroke:#000000;stroke-width:1;" x1="215.6748" x2="215.6748" y1="128.9063" y2="4056.8047"/></g><g><title>MainActivity</title><rect fill="#000000" fill-opacity="0.00000" height="3927.8984" width="8" x="496.8247" y="128.9063"/><line style="stroke:#000000;stroke-width:1;" x1="500.813" x2="500.813" y1="128.9063" y2="4056.8047"/></g><g><title>AuthViewModel</title><rect fill="#000000" fill-opacity="0.00000" height="3927.8984" width="8" x="748.9087" y="128.9063"/><line style="stroke:#000000;stroke-width:1;" x1="752.7202" x2="752.7202" y1="128.9063" y2="4056.8047"/></g><g><title>AuthService</title><rect fill="#000000" fill-opacity="0.00000" height="3927.8984" width="8" x="889.374" y="128.9063"/><line style="stroke:#000000;stroke-width:1;" x1="893.0972" x2="893.0972" y1="128.9063" y2="4056.8047"/></g><g><title>SecurityService</title><rect fill="#000000" fill-opacity="0.00000" height="3927.8984" width="8" x="1030.2666" y="128.9063"/><line style="stroke:#000000;stroke-width:1;" x1="1033.6509" x2="1033.6509" y1="128.9063" y2="4056.8047"/></g><g><title>Android Keystore</title><rect fill="#000000" fill-opacity="0.00000" height="3927.8984" width="8" x="1312.3154" y="128.9063"/><line style="stroke:#000000;stroke-width:1;" x1="1315.9746" x2="1315.9746" y1="128.9063" y2="4056.8047"/></g><g><title>Biometric Authentication</title><rect fill="#000000" fill-opacity="0.00000" height="3927.8984" width="8" x="1503.8384" y="128.9063"/><line style="stroke:#000000;stroke-width:1;" x1="1507.6563" x2="1507.6563" y1="128.9063" y2="4056.8047"/></g><g><title>SessionManager</title><rect fill="#000000" fill-opacity="0.00000" height="3927.8984" width="8" x="1692.4116" y="128.9063"/><line style="stroke:#000000;stroke-width:1;" x1="1696.0205" x2="1696.0205" y1="128.9063" y2="4056.8047"/></g><g><title>Security Monitor</title><rect fill="#000000" fill-opacity="0.00000" height="3927.8984" width="8" x="1924.3394" y="128.9063"/><line style="stroke:#000000;stroke-width:1;" x1="1927.7603" x2="1927.7603" y1="128.9063" y2="4056.8047"/></g><g><title>DataStore</title><rect fill="#000000" fill-opacity="0.00000" height="3927.8984" width="8" x="2146.1743" y="128.9063"/><line style="stroke:#000000;stroke-width:1;" x1="2149.8052" x2="2149.8052" y1="128.9063" y2="4056.8047"/></g><g class="participant participant-head" data-participant="Child"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="71.6748" x="66" y="125.6045">Child User</text><ellipse cx="104.8374" cy="60.6094" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><path d="M104.8374,68.6094 L104.8374,95.6094 M91.8374,76.6094 L117.8374,76.6094 M104.8374,95.6094 L91.8374,110.6094 M104.8374,95.6094 L117.8374,110.6094" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-tail" data-participant="Child"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="71.6748" x="66" y="4068.7998">Child User</text><ellipse cx="104.8374" cy="4081.1016" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><path d="M104.8374,4089.1016 L104.8374,4116.1016 M91.8374,4097.1016 L117.8374,4097.1016 M104.8374,4116.1016 L91.8374,4131.1016 M104.8374,4116.1016 L117.8374,4131.1016" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-head" data-participant="Parent"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="118.624" x="153.6748" y="125.6045">Parent/Caregiver</text><ellipse cx="215.9868" cy="60.6094" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><path d="M215.9868,68.6094 L215.9868,95.6094 M202.9868,76.6094 L228.9868,76.6094 M215.9868,95.6094 L202.9868,110.6094 M215.9868,95.6094 L228.9868,110.6094" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-tail" data-participant="Parent"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="118.624" x="153.6748" y="4068.7998">Parent/Caregiver</text><ellipse cx="215.9868" cy="4081.1016" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><path d="M215.9868,4089.1016 L215.9868,4116.1016 M202.9868,4097.1016 L228.9868,4097.1016 M215.9868,4116.1016 L202.9868,4131.1016 M215.9868,4116.1016 L228.9868,4131.1016" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-head" data-participant="MainActivity"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="100.0234" x="450.813" y="97.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="86.0234" x="457.813" y="117.6045">MainActivity</text></g><g class="participant participant-tail" data-participant="MainActivity"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="100.0234" x="450.813" y="4055.8047"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="86.0234" x="457.813" y="4075.7998">MainActivity</text></g><g class="participant participant-head" data-participant="AuthViewModel"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="122.377" x="691.7202" y="97.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="108.377" x="698.7202" y="117.6045">AuthViewModel</text></g><g class="participant participant-tail" data-participant="AuthViewModel"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="122.377" x="691.7202" y="4055.8047"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="108.377" x="698.7202" y="4075.7998">AuthViewModel</text></g><g class="participant participant-head" data-participant="AuthService"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="98.5537" x="844.0972" y="97.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="84.5537" x="851.0972" y="117.6045">AuthService</text></g><g class="participant participant-tail" data-participant="AuthService"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="98.5537" x="844.0972" y="4055.8047"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="84.5537" x="851.0972" y="4075.7998">AuthService</text></g><g class="participant participant-head" data-participant="SecurityService"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="123.2314" x="972.6509" y="97.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="109.2314" x="979.6509" y="117.6045">SecurityService</text></g><g class="participant participant-tail" data-participant="SecurityService"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="123.2314" x="972.6509" y="4055.8047"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="109.2314" x="979.6509" y="4075.7998">SecurityService</text></g><g class="participant participant-head" data-participant="AndroidKeystore"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="134.6816" x="1248.9746" y="97.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="120.6816" x="1255.9746" y="117.6045">Android Keystore</text></g><g class="participant participant-tail" data-participant="AndroidKeystore"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="134.6816" x="1248.9746" y="4055.8047"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="120.6816" x="1255.9746" y="4075.7998">Android Keystore</text></g><g class="participant participant-head" data-participant="BiometricAuth"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="188.3643" x="1413.6563" y="97.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="174.3643" x="1420.6563" y="117.6045">Biometric Authentication</text></g><g class="participant participant-tail" data-participant="BiometricAuth"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="188.3643" x="1413.6563" y="4055.8047"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="174.3643" x="1420.6563" y="4075.7998">Biometric Authentication</text></g><g class="participant participant-head" data-participant="SessionManager"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="128.7822" x="1632.0205" y="97.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="114.7822" x="1639.0205" y="117.6045">SessionManager</text></g><g class="participant participant-tail" data-participant="SessionManager"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="128.7822" x="1632.0205" y="4055.8047"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="114.7822" x="1639.0205" y="4075.7998">SessionManager</text></g><g class="participant participant-head" data-participant="SecurityMonitor"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="129.1582" x="1863.7603" y="97.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="115.1582" x="1870.7603" y="117.6045">Security Monitor</text></g><g class="participant participant-tail" data-participant="SecurityMonitor"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="129.1582" x="1863.7603" y="4055.8047"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="115.1582" x="1870.7603" y="4075.7998">Security Monitor</text></g><g class="participant participant-head" data-participant="DataStore"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="84.7383" x="2107.8052" y="97.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="70.7383" x="2114.8052" y="117.6045">DataStore</text></g><g class="participant participant-tail" data-participant="DataStore"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="84.7383" x="2107.8052" y="4055.8047"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="70.7383" x="2114.8052" y="4075.7998">DataStore</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2280.5571" x="5" y="159.4727"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2285.5571" y1="159.4727" y2="159.4727"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2285.5571" y1="162.4727" y2="162.4727"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="151.2236" x="1069.6667" y="148.9063"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="132.6978" x="1075.6667" y="164.9731">Initial App Launch</text><g class="message" data-participant-1="Child" data-participant-2="MainActivity"><polygon fill="#000000" points="488.8247,199.1719,498.8247,203.1719,488.8247,207.1719,492.8247,203.1719" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="104.8374" x2="494.8247" y1="203.1719" y2="203.1719"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="75.6768" x="111.8374" y="198.106">Launch app</text></g><g class="message" data-participant-1="MainActivity" data-participant-2="AuthViewModel"><polygon fill="#000000" points="740.9087,228.3047,750.9087,232.3047,740.9087,236.3047,744.9087,232.3047" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="500.8247" x2="746.9087" y1="232.3047" y2="232.3047"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="113.0835" x="507.8247" y="227.2388">checkAuthState()</text></g><g class="message" data-participant-1="AuthViewModel" data-participant-2="SessionManager"><polygon fill="#000000" points="1684.4116,257.4375,1694.4116,261.4375,1684.4116,265.4375,1688.4116,261.4375" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="752.9087" x2="1690.4116" y1="261.4375" y2="261.4375"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="130.4316" x="759.9087" y="256.3716">getCurrentSession()</text></g><g class="message" data-participant-1="SessionManager" data-participant-2="DataStore"><polygon fill="#000000" points="2138.1743,286.5703,2148.1743,290.5703,2138.1743,294.5703,2142.1743,290.5703" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1696.4116" x2="2144.1743" y1="290.5703" y2="290.5703"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="123.9888" x="1703.4116" y="285.5044">getStoredSession()</text></g><g class="message" data-participant-1="DataStore" data-participant-2="SessionManager"><polygon fill="#000000" points="1707.4116,315.7031,1697.4116,319.7031,1707.4116,323.7031,1703.4116,319.7031" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1701.4116" x2="2149.1743" y1="319.7031" y2="319.7031"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="125.9312" x="1713.4116" y="314.6372">return session data</text></g><path d="M56,334.7031 L120.4429,334.7031 L120.4429,341.8359 L110.4429,351.8359 L56,351.8359 L56,334.7031" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="206.7344" style="stroke:#000000;stroke-width:1;" width="1724.8027" x="56" y="334.7031"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="71" y="347.77">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="158.9951" x="135.4429" y="346.9136">[Session exists and valid]</text><g class="message" data-participant-1="SessionManager" data-participant-2="AuthViewModel"><polygon fill="#000000" points="763.9087,368.9688,753.9087,372.9688,763.9087,376.9688,759.9087,372.9688" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="757.9087" x2="1695.4116" y1="372.9688" y2="372.9688"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="127.7847" x="769.9087" y="367.9028">return valid session</text></g><g class="message" data-participant-1="AuthViewModel" data-participant-2="MainActivity"><polygon fill="#000000" points="511.8247,398.1016,501.8247,402.1016,511.8247,406.1016,507.8247,402.1016" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="505.8247" x2="751.9087" y1="402.1016" y2="402.1016"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="141.0322" x="517.8247" y="397.0356">authenticated(CHILD)</text></g><g class="message" data-participant-1="MainActivity" data-participant-2="Child"><polygon fill="#000000" points="115.8374,427.2344,105.8374,431.2344,115.8374,435.2344,111.8374,431.2344" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="109.8374" x2="499.8247" y1="431.2344" y2="431.2344"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="141.7241" x="121.8374" y="426.1685">show child dashboard</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="56" x2="1780.8027" y1="440.2344" y2="440.2344"/><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="170.731" x="61" y="450.4448">[Session expired or invalid]</text><g class="message" data-participant-1="SessionManager" data-participant-2="AuthViewModel"><polygon fill="#000000" points="763.9087,471.1719,753.9087,475.1719,763.9087,479.1719,759.9087,475.1719" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="757.9087" x2="1695.4116" y1="475.1719" y2="475.1719"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="68.0977" x="769.9087" y="470.106">return null</text></g><g class="message" data-participant-1="AuthViewModel" data-participant-2="MainActivity"><polygon fill="#000000" points="511.8247,500.3047,501.8247,504.3047,511.8247,508.3047,507.8247,504.3047" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="505.8247" x2="751.9087" y1="504.3047" y2="504.3047"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="117.5713" x="517.8247" y="499.2388">unauthenticated()</text></g><g class="message" data-participant-1="MainActivity" data-participant-2="Child"><polygon fill="#000000" points="115.8374,529.4375,105.8374,533.4375,115.8374,537.4375,111.8374,533.4375" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="109.8374" x2="499.8247" y1="533.4375" y2="533.4375"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="172.834" x="121.8374" y="528.3716">show role selection screen</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2280.5571" x="5" y="569.0039"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2285.5571" y1="569.0039" y2="569.0039"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2285.5571" y1="572.0039" y2="572.0039"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="123.2813" x="1083.6379" y="558.4375"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="104.7554" x="1089.6379" y="574.5044">Role Selection</text><g class="message" data-participant-1="Child" data-participant-2="MainActivity"><polygon fill="#000000" points="488.8247,608.7031,498.8247,612.7031,488.8247,616.7031,492.8247,612.7031" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="104.8374" x2="494.8247" y1="612.7031" y2="612.7031"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="127.061" x="111.8374" y="607.6372">select "Child Mode"</text></g><g class="message" data-participant-1="MainActivity" data-participant-2="AuthViewModel"><polygon fill="#000000" points="740.9087,637.8359,750.9087,641.8359,740.9087,645.8359,744.9087,641.8359" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="500.8247" x2="746.9087" y1="641.8359" y2="641.8359"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="128.1782" x="507.8247" y="636.77">setUserRole(CHILD)</text></g><g class="message" data-participant-1="AuthViewModel" data-participant-2="MainActivity"><polygon fill="#000000" points="511.8247,666.9688,501.8247,670.9688,511.8247,674.9688,507.8247,670.9688" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="505.8247" x2="751.9087" y1="670.9688" y2="670.9688"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="130.7046" x="517.8247" y="665.9028">show child interface</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2280.5571" x="5" y="699.5352"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2285.5571" y1="699.5352" y2="699.5352"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2285.5571" y1="702.5352" y2="702.5352"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="166.3311" x="1062.113" y="688.9688"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="147.8052" x="1068.113" y="705.0356">Parent Mode Access</text><g class="message" data-participant-1="Parent" data-participant-2="MainActivity"><polygon fill="#000000" points="488.8247,739.2344,498.8247,743.2344,488.8247,747.2344,492.8247,743.2344" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="215.9868" x2="494.8247" y1="743.2344" y2="743.2344"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="136.7539" x="222.9868" y="738.1685">select "Parent Mode"</text></g><g class="message" data-participant-1="MainActivity" data-participant-2="AuthViewModel"><polygon fill="#000000" points="740.9087,768.3672,750.9087,772.3672,740.9087,776.3672,744.9087,772.3672" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="500.8247" x2="746.9087" y1="772.3672" y2="772.3672"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="132.7993" x="507.8247" y="767.3013">requestParentAuth()</text></g><g class="message" data-participant-1="AuthViewModel" data-participant-2="MainActivity"><polygon fill="#000000" points="511.8247,797.5,501.8247,801.5,511.8247,805.5,507.8247,801.5" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="505.8247" x2="751.9087" y1="801.5" y2="801.5"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="145.2661" x="517.8247" y="796.4341">show PIN entry screen</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2280.5571" x="5" y="830.0664"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2285.5571" y1="830.0664" y2="830.0664"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2285.5571" y1="833.0664" y2="833.0664"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="157.1587" x="1066.6992" y="819.5"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="138.6328" x="1072.6992" y="835.5669">PIN Authentication</text><g class="message" data-participant-1="Parent" data-participant-2="MainActivity"><polygon fill="#000000" points="488.8247,869.7656,498.8247,873.7656,488.8247,877.7656,492.8247,873.7656" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="215.9868" x2="494.8247" y1="873.7656" y2="873.7656"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="60.2075" x="222.9868" y="868.6997">enter PIN</text></g><g class="message" data-participant-1="MainActivity" data-participant-2="AuthViewModel"><polygon fill="#000000" points="740.9087,898.8984,750.9087,902.8984,740.9087,906.8984,744.9087,902.8984" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="500.8247" x2="746.9087" y1="902.8984" y2="902.8984"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="112.9438" x="507.8247" y="897.8325">authenticate(pin)</text></g><g class="message" data-participant-1="AuthViewModel" data-participant-2="SecurityService"><polygon fill="#000000" points="1022.2666,928.0313,1032.2666,932.0313,1022.2666,936.0313,1026.2666,932.0313" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="752.9087" x2="1028.2666" y1="932.0313" y2="932.0313"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="102.1338" x="759.9087" y="926.9653">validatePin(pin)</text></g><g class="message" data-participant-1="SecurityService" data-participant-2="AndroidKeystore"><polygon fill="#000000" points="1304.3154,957.1641,1314.3154,961.1641,1304.3154,965.1641,1308.3154,961.1641" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1034.2666" x2="1310.3154" y1="961.1641" y2="961.1641"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="156.5713" x="1041.2666" y="956.0981">retrieveStoredPinHash()</text></g><g class="message" data-participant-1="AndroidKeystore" data-participant-2="SecurityService"><polygon fill="#000000" points="1045.2666,986.2969,1035.2666,990.2969,1045.2666,994.2969,1041.2666,990.2969" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1039.2666" x2="1315.3154" y1="990.2969" y2="990.2969"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="97.2524" x="1051.2666" y="985.231">return pinHash</text></g><g class="message" data-participant-1="SecurityService" data-participant-2="SecurityService"><line style="stroke:#000000;stroke-width:1;" x1="1034.2666" x2="1076.2666" y1="1019.4297" y2="1019.4297"/><line style="stroke:#000000;stroke-width:1;" x1="1076.2666" x2="1076.2666" y1="1019.4297" y2="1032.4297"/><line style="stroke:#000000;stroke-width:1;" x1="1035.2666" x2="1076.2666" y1="1032.4297" y2="1032.4297"/><polygon fill="#000000" points="1045.2666,1028.4297,1035.2666,1032.4297,1045.2666,1036.4297,1041.2666,1032.4297" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="268.0488" x="1041.2666" y="1014.3638">compareHashes(enteredPin, storedHash)</text></g><path d="M133.6748,1047.4297 L198.1177,1047.4297 L198.1177,1054.5625 L188.1177,1064.5625 L133.6748,1064.5625 L133.6748,1047.4297" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="586.1328" style="stroke:#000000;stroke-width:1;" width="2078.8687" x="133.6748" y="1047.4297"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="148.6748" y="1060.4966">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="66.5962" x="213.1177" y="1059.6401">[PIN Valid]</text><g class="message" data-participant-1="SecurityService" data-participant-2="AuthViewModel"><polygon fill="#000000" points="763.9087,1081.6953,753.9087,1085.6953,763.9087,1089.6953,759.9087,1085.6953" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="757.9087" x2="1033.2666" y1="1085.6953" y2="1085.6953"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="165.915" x="769.9087" y="1080.6294">authentication successful</text></g><g class="message" data-participant-1="AuthViewModel" data-participant-2="SessionManager"><polygon fill="#000000" points="1684.4116,1110.8281,1694.4116,1114.8281,1684.4116,1118.8281,1688.4116,1114.8281" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="752.9087" x2="1690.4116" y1="1114.8281" y2="1114.8281"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="152.9404" x="759.9087" y="1109.7622">createSession(PARENT)</text></g><g class="message" data-participant-1="SessionManager" data-participant-2="DataStore"><polygon fill="#000000" points="2138.1743,1139.9609,2148.1743,1143.9609,2138.1743,1147.9609,2142.1743,1143.9609" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1696.4116" x2="2144.1743" y1="1143.9609" y2="1143.9609"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="172.0723" x="1703.4116" y="1138.895">storeSession(sessionData)</text></g><g class="message" data-participant-1="SessionManager" data-participant-2="AuthViewModel"><polygon fill="#000000" points="763.9087,1169.0938,753.9087,1173.0938,763.9087,1177.0938,759.9087,1173.0938" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="757.9087" x2="1695.4116" y1="1173.0938" y2="1173.0938"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="102.0576" x="769.9087" y="1168.0278">session created</text></g><g class="message" data-participant-1="AuthViewModel" data-participant-2="MainActivity"><polygon fill="#000000" points="511.8247,1198.2266,501.8247,1202.2266,511.8247,1206.2266,507.8247,1202.2266" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="505.8247" x2="751.9087" y1="1202.2266" y2="1202.2266"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="152.7373" x="517.8247" y="1197.1606">authenticated(PARENT)</text></g><g class="message" data-participant-1="MainActivity" data-participant-2="Parent"><polygon fill="#000000" points="226.9868,1227.3594,216.9868,1231.3594,226.9868,1235.3594,222.9868,1231.3594" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="220.9868" x2="499.8247" y1="1231.3594" y2="1231.3594"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="153.7593" x="232.9868" y="1226.2935">show parent dashboard</text></g><g class="message" data-participant-1="SecurityService" data-participant-2="SecurityMonitor"><polygon fill="#000000" points="1916.3394,1256.4922,1926.3394,1260.4922,1916.3394,1264.4922,1920.3394,1260.4922" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1034.2666" x2="1922.3394" y1="1260.4922" y2="1260.4922"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="223.8501" x="1041.2666" y="1255.4263">logSecurityEvent(AUTH_SUCCESS)</text></g><g class="message" data-participant-1="SessionManager" data-participant-2="SessionManager"><line style="stroke:#000000;stroke-width:1;" x1="1696.4116" x2="1738.4116" y1="1289.625" y2="1289.625"/><line style="stroke:#000000;stroke-width:1;" x1="1738.4116" x2="1738.4116" y1="1289.625" y2="1302.625"/><line style="stroke:#000000;stroke-width:1;" x1="1697.4116" x2="1738.4116" y1="1302.625" y2="1302.625"/><polygon fill="#000000" points="1707.4116,1298.625,1697.4116,1302.625,1707.4116,1306.625,1703.4116,1302.625" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="217.9277" x="1703.4116" y="1284.5591">startAutoLogoutTimer(5 minutes)</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="133.6748" x2="2212.5435" y1="1311.625" y2="1311.625"/><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="77.1772" x="138.6748" y="1321.8354">[PIN Invalid]</text><g class="message" data-participant-1="SecurityService" data-participant-2="AuthViewModel"><polygon fill="#000000" points="763.9087,1342.5625,753.9087,1346.5625,763.9087,1350.5625,759.9087,1346.5625" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="757.9087" x2="1033.2666" y1="1346.5625" y2="1346.5625"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="134.6528" x="769.9087" y="1341.4966">authentication failed</text></g><g class="message" data-participant-1="AuthViewModel" data-participant-2="SecurityService"><polygon fill="#000000" points="1022.2666,1371.6953,1032.2666,1375.6953,1022.2666,1379.6953,1026.2666,1375.6953" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="752.9087" x2="1028.2666" y1="1375.6953" y2="1375.6953"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="175.2715" x="759.9087" y="1370.6294">incrementFailedAttempts()</text></g><g class="message" data-participant-1="SecurityService" data-participant-2="SecurityMonitor"><polygon fill="#000000" points="1916.3394,1400.8281,1926.3394,1404.8281,1916.3394,1408.8281,1920.3394,1404.8281" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1034.2666" x2="1922.3394" y1="1404.8281" y2="1404.8281"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="217.4199" x="1041.2666" y="1399.7622">logSecurityEvent(AUTH_FAILURE)</text></g><path d="M143.6748,1419.8281 L208.1177,1419.8281 L208.1177,1426.9609 L198.1177,1436.9609 L143.6748,1436.9609 L143.6748,1419.8281" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="206.7344" style="stroke:#000000;stroke-width:1;" width="1869.2437" x="143.6748" y="1419.8281"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="158.6748" y="1432.895">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="132.7681" x="223.1177" y="1432.0386">[Failed attempts &lt; 3]</text><g class="message" data-participant-1="AuthViewModel" data-participant-2="MainActivity"><polygon fill="#000000" points="511.8247,1454.0938,501.8247,1458.0938,511.8247,1462.0938,507.8247,1458.0938" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="505.8247" x2="751.9087" y1="1458.0938" y2="1458.0938"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="109.459" x="517.8247" y="1453.0278">show error, retry</text></g><g class="message" data-participant-1="MainActivity" data-participant-2="Parent"><polygon fill="#000000" points="226.9868,1483.2266,216.9868,1487.2266,226.9868,1491.2266,222.9868,1487.2266" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="220.9868" x2="499.8247" y1="1487.2266" y2="1487.2266"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="162.1636" x="232.9868" y="1482.1606">"Incorrect PIN, try again"</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="143.6748" x2="2012.9185" y1="1496.2266" y2="1496.2266"/><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="141.9849" x="148.6748" y="1506.437">[Failed attempts &gt;= 3]</text><g class="message" data-participant-1="SecurityService" data-participant-2="AuthViewModel"><polygon fill="#000000" points="763.9087,1527.1641,753.9087,1531.1641,763.9087,1535.1641,759.9087,1531.1641" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="757.9087" x2="1033.2666" y1="1531.1641" y2="1531.1641"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="98.4141" x="769.9087" y="1526.0981">account locked</text></g><g class="message" data-participant-1="AuthViewModel" data-participant-2="MainActivity"><polygon fill="#000000" points="511.8247,1556.2969,501.8247,1560.2969,511.8247,1564.2969,507.8247,1560.2969" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="505.8247" x2="751.9087" y1="1560.2969" y2="1560.2969"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="132.8945" x="517.8247" y="1555.231">show lockout screen</text></g><g class="message" data-participant-1="MainActivity" data-participant-2="Parent"><polygon fill="#000000" points="226.9868,1585.4297,216.9868,1589.4297,226.9868,1593.4297,222.9868,1589.4297" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="220.9868" x2="499.8247" y1="1589.4297" y2="1589.4297"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="210.7358" x="232.9868" y="1584.3638">"Account locked for 15 minutes"</text></g><g class="message" data-participant-1="SecurityService" data-participant-2="SecurityMonitor"><polygon fill="#000000" points="1916.3394,1614.5625,1926.3394,1618.5625,1916.3394,1622.5625,1920.3394,1618.5625" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1034.2666" x2="1922.3394" y1="1618.5625" y2="1618.5625"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="244.8481" x="1041.2666" y="1613.4966">logSecurityEvent(ACCOUNT_LOCKED)</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2280.5571" x="5" y="1661.1289"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2285.5571" y1="1661.1289" y2="1661.1289"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2285.5571" y1="1664.1289" y2="1664.1289"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="269.3281" x="1010.6145" y="1650.5625"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="250.8022" x="1016.6145" y="1666.6294">Optional Biometric Authentication</text><path d="M135,1688.6953 L135,1713.6953 L1588,1713.6953 L1588,1698.6953 L1578,1688.6953 L135,1688.6953" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1578,1688.6953 L1578,1698.6953 L1588,1698.6953 L1578,1688.6953" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="224.5229" x="744.9114" y="1705.7622">Alternative authentication method</text><g class="message" data-participant-1="Parent" data-participant-2="MainActivity"><polygon fill="#000000" points="488.8247,1735.9609,498.8247,1739.9609,488.8247,1743.9609,492.8247,1739.9609" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="215.9868" x2="494.8247" y1="1739.9609" y2="1739.9609"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="145.4819" x="222.9868" y="1734.895">select "Use Biometric"</text></g><g class="message" data-participant-1="MainActivity" data-participant-2="AuthViewModel"><polygon fill="#000000" points="740.9087,1765.0938,750.9087,1769.0938,740.9087,1773.0938,744.9087,1769.0938" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="500.8247" x2="746.9087" y1="1769.0938" y2="1769.0938"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="152.6611" x="507.8247" y="1764.0278">requestBiometricAuth()</text></g><g class="message" data-participant-1="AuthViewModel" data-participant-2="BiometricAuth"><polygon fill="#000000" points="1495.8384,1794.2266,1505.8384,1798.2266,1495.8384,1802.2266,1499.8384,1798.2266" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="752.9087" x2="1501.8384" y1="1798.2266" y2="1798.2266"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="92.8408" x="759.9087" y="1793.1606">authenticate()</text></g><g class="message" data-participant-1="BiometricAuth" data-participant-2="AndroidKeystore"><polygon fill="#000000" points="1327.3154,1823.3594,1317.3154,1827.3594,1327.3154,1831.3594,1323.3154,1827.3594" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1321.3154" x2="1506.8384" y1="1827.3594" y2="1827.3594"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="102.7305" x="1333.3154" y="1822.2935">verify biometric</text></g><g class="message" data-participant-1="AndroidKeystore" data-participant-2="BiometricAuth"><polygon fill="#000000" points="1495.8384,1852.4922,1505.8384,1856.4922,1495.8384,1860.4922,1499.8384,1856.4922" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1316.3154" x2="1501.8384" y1="1856.4922" y2="1856.4922"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="102.8765" x="1323.3154" y="1851.4263">biometric result</text></g><path d="M143.6748,1871.4922 L208.1177,1871.4922 L208.1177,1878.625 L198.1177,1888.625 L143.6748,1888.625 L143.6748,1871.4922" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="323.2656" style="stroke:#000000;stroke-width:1;" width="1869.2437" x="143.6748" y="1871.4922"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="158.6748" y="1884.5591">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="122.8423" x="223.1177" y="1883.7026">[Biometric Success]</text><g class="message" data-participant-1="BiometricAuth" data-participant-2="AuthViewModel"><polygon fill="#000000" points="763.9087,1905.7578,753.9087,1909.7578,763.9087,1913.7578,759.9087,1909.7578" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="757.9087" x2="1506.8384" y1="1909.7578" y2="1909.7578"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="165.915" x="769.9087" y="1904.6919">authentication successful</text></g><g class="message" data-participant-1="AuthViewModel" data-participant-2="SessionManager"><polygon fill="#000000" points="1684.4116,1934.8906,1694.4116,1938.8906,1684.4116,1942.8906,1688.4116,1938.8906" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="752.9087" x2="1690.4116" y1="1938.8906" y2="1938.8906"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="152.9404" x="759.9087" y="1933.8247">createSession(PARENT)</text></g><g class="message" data-participant-1="SessionManager" data-participant-2="AuthViewModel"><polygon fill="#000000" points="763.9087,1964.0234,753.9087,1968.0234,763.9087,1972.0234,759.9087,1968.0234" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="757.9087" x2="1695.4116" y1="1968.0234" y2="1968.0234"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="102.0576" x="769.9087" y="1962.9575">session created</text></g><g class="message" data-participant-1="AuthViewModel" data-participant-2="MainActivity"><polygon fill="#000000" points="511.8247,1993.1563,501.8247,1997.1563,511.8247,2001.1563,507.8247,1997.1563" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="505.8247" x2="751.9087" y1="1997.1563" y2="1997.1563"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="152.7373" x="517.8247" y="1992.0903">authenticated(PARENT)</text></g><g class="message" data-participant-1="MainActivity" data-participant-2="Parent"><polygon fill="#000000" points="226.9868,2022.2891,216.9868,2026.2891,226.9868,2030.2891,222.9868,2026.2891" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="220.9868" x2="499.8247" y1="2026.2891" y2="2026.2891"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="153.7593" x="232.9868" y="2021.2231">show parent dashboard</text></g><g class="message" data-participant-1="SecurityService" data-participant-2="SecurityMonitor"><polygon fill="#000000" points="1916.3394,2051.4219,1926.3394,2055.4219,1916.3394,2059.4219,1920.3394,2055.4219" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1034.2666" x2="1922.3394" y1="2055.4219" y2="2055.4219"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="302.6499" x="1041.2666" y="2050.356">logSecurityEvent(BIOMETRIC_AUTH_SUCCESS)</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="143.6748" x2="2012.9185" y1="2064.4219" y2="2064.4219"/><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="111.3052" x="148.6748" y="2074.6323">[Biometric Failed]</text><g class="message" data-participant-1="BiometricAuth" data-participant-2="AuthViewModel"><polygon fill="#000000" points="763.9087,2095.3594,753.9087,2099.3594,763.9087,2103.3594,759.9087,2099.3594" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="757.9087" x2="1506.8384" y1="2099.3594" y2="2099.3594"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="134.6528" x="769.9087" y="2094.2935">authentication failed</text></g><g class="message" data-participant-1="AuthViewModel" data-participant-2="MainActivity"><polygon fill="#000000" points="511.8247,2124.4922,501.8247,2128.4922,511.8247,2132.4922,507.8247,2128.4922" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="505.8247" x2="751.9087" y1="2128.4922" y2="2128.4922"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="93.374" x="517.8247" y="2123.4263">fallback to PIN</text></g><g class="message" data-participant-1="MainActivity" data-participant-2="Parent"><polygon fill="#000000" points="226.9868,2153.625,216.9868,2157.625,226.9868,2161.625,222.9868,2157.625" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="220.9868" x2="499.8247" y1="2157.625" y2="2157.625"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="182.9268" x="232.9868" y="2152.5591">"Biometric failed, enter PIN"</text></g><g class="message" data-participant-1="SecurityService" data-participant-2="SecurityMonitor"><polygon fill="#000000" points="1916.3394,2182.7578,1926.3394,2186.7578,1916.3394,2190.7578,1920.3394,2186.7578" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1034.2666" x2="1922.3394" y1="2186.7578" y2="2186.7578"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="296.2197" x="1041.2666" y="2181.6919">logSecurityEvent(BIOMETRIC_AUTH_FAILURE)</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2280.5571" x="5" y="2222.3242"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2285.5571" y1="2222.3242" y2="2222.3242"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2285.5571" y1="2225.3242" y2="2225.3242"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="175.04" x="1057.7585" y="2211.7578"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="156.5142" x="1063.7585" y="2227.8247">Session Management</text><path d="M1573,2249.8906 L1573,2274.8906 L1818,2274.8906 L1818,2259.8906 L1808,2249.8906 L1573,2249.8906" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1808,2249.8906 L1808,2259.8906 L1818,2259.8906 L1808,2249.8906" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="224.1992" x="1579" y="2266.9575">Session timeout and management</text><g class="message" data-participant-1="SessionManager" data-participant-2="SessionManager"><line style="stroke:#000000;stroke-width:1;" x1="1696.4116" x2="1738.4116" y1="2301.1563" y2="2301.1563"/><line style="stroke:#000000;stroke-width:1;" x1="1738.4116" x2="1738.4116" y1="2301.1563" y2="2314.1563"/><line style="stroke:#000000;stroke-width:1;" x1="1697.4116" x2="1738.4116" y1="2314.1563" y2="2314.1563"/><polygon fill="#000000" points="1707.4116,2310.1563,1697.4116,2314.1563,1707.4116,2318.1563,1703.4116,2314.1563" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="145.1074" x="1703.4116" y="2296.0903">check session timeout</text></g><path d="M143.6748,2329.1563 L208.1177,2329.1563 L208.1177,2336.2891 L198.1177,2346.2891 L143.6748,2346.2891 L143.6748,2329.1563" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="265" style="stroke:#000000;stroke-width:1;" width="2068.8687" x="143.6748" y="2329.1563"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="158.6748" y="2342.2231">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="194.0039" x="223.1177" y="2341.3667">[Session active within timeout]</text><g class="message" data-participant-1="SessionManager" data-participant-2="AuthViewModel"><polygon fill="#000000" points="763.9087,2363.4219,753.9087,2367.4219,763.9087,2371.4219,759.9087,2367.4219" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="757.9087" x2="1695.4116" y1="2367.4219" y2="2367.4219"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="83.3892" x="769.9087" y="2362.356">session valid</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="143.6748" x2="2212.5435" y1="2376.4219" y2="2376.4219"/><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="173.1533" x="148.6748" y="2386.6323">[Session timeout exceeded]</text><g class="message" data-participant-1="SessionManager" data-participant-2="AuthViewModel"><polygon fill="#000000" points="763.9087,2407.3594,753.9087,2411.3594,763.9087,2415.3594,759.9087,2411.3594" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="757.9087" x2="1695.4116" y1="2411.3594" y2="2411.3594"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="101.4038" x="769.9087" y="2406.2935">session expired</text></g><g class="message" data-participant-1="AuthViewModel" data-participant-2="MainActivity"><polygon fill="#000000" points="511.8247,2436.4922,501.8247,2440.4922,511.8247,2444.4922,507.8247,2440.4922" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="505.8247" x2="751.9087" y1="2440.4922" y2="2440.4922"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="51.251" x="517.8247" y="2435.4263">logout()</text></g><g class="message" data-participant-1="MainActivity" data-participant-2="AuthViewModel"><polygon fill="#000000" points="740.9087,2465.625,750.9087,2469.625,740.9087,2473.625,744.9087,2469.625" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="500.8247" x2="746.9087" y1="2469.625" y2="2469.625"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="91.8125" x="507.8247" y="2464.5591">clearSession()</text></g><g class="message" data-participant-1="AuthViewModel" data-participant-2="SessionManager"><polygon fill="#000000" points="1684.4116,2494.7578,1694.4116,2498.7578,1684.4116,2502.7578,1688.4116,2498.7578" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="752.9087" x2="1690.4116" y1="2498.7578" y2="2498.7578"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="108.856" x="759.9087" y="2493.6919">destroySession()</text></g><g class="message" data-participant-1="SessionManager" data-participant-2="DataStore"><polygon fill="#000000" points="2138.1743,2523.8906,2148.1743,2527.8906,2138.1743,2531.8906,2142.1743,2527.8906" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1696.4116" x2="2144.1743" y1="2527.8906" y2="2527.8906"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="134.71" x="1703.4116" y="2522.8247">clearStoredSession()</text></g><g class="message" data-participant-1="SecurityService" data-participant-2="SecurityMonitor"><polygon fill="#000000" points="1916.3394,2553.0234,1926.3394,2557.0234,1916.3394,2561.0234,1920.3394,2557.0234" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1034.2666" x2="1922.3394" y1="2557.0234" y2="2557.0234"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="242.7407" x="1041.2666" y="2551.9575">logSecurityEvent(SESSION_TIMEOUT)</text></g><g class="message" data-participant-1="MainActivity" data-participant-2="Parent"><polygon fill="#000000" points="226.9868,2582.1563,216.9868,2586.1563,226.9868,2590.1563,222.9868,2586.1563" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="220.9868" x2="499.8247" y1="2586.1563" y2="2586.1563"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="159.5801" x="232.9868" y="2581.0903">redirect to role selection</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2280.5571" x="5" y="2621.7227"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2285.5571" y1="2621.7227" y2="2621.7227"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2285.5571" y1="2624.7227" y2="2624.7227"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="127.2866" x="1081.6353" y="2611.1563"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="108.7607" x="1087.6353" y="2627.2231">Role Switching</text><path d="M10,2649.2891 L10,2674.2891 L312,2674.2891 L312,2659.2891 L302,2649.2891 L10,2649.2891" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M302,2649.2891 L302,2659.2891 L312,2659.2891 L302,2649.2891" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="281.8169" x="16" y="2666.356">Switching between child and parent modes</text><g class="message" data-participant-1="Parent" data-participant-2="MainActivity"><polygon fill="#000000" points="488.8247,2696.5547,498.8247,2700.5547,488.8247,2704.5547,492.8247,2700.5547" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="215.9868" x2="494.8247" y1="2700.5547" y2="2700.5547"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="148.5986" x="222.9868" y="2695.4888">"Switch to Child Mode"</text></g><g class="message" data-participant-1="MainActivity" data-participant-2="AuthViewModel"><polygon fill="#000000" points="740.9087,2725.6875,750.9087,2729.6875,740.9087,2733.6875,744.9087,2729.6875" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="500.8247" x2="746.9087" y1="2729.6875" y2="2729.6875"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="51.251" x="507.8247" y="2724.6216">logout()</text></g><g class="message" data-participant-1="AuthViewModel" data-participant-2="SessionManager"><polygon fill="#000000" points="1684.4116,2754.8203,1694.4116,2758.8203,1684.4116,2762.8203,1688.4116,2758.8203" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="752.9087" x2="1690.4116" y1="2758.8203" y2="2758.8203"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="108.856" x="759.9087" y="2753.7544">destroySession()</text></g><g class="message" data-participant-1="SessionManager" data-participant-2="DataStore"><polygon fill="#000000" points="2138.1743,2783.9531,2148.1743,2787.9531,2138.1743,2791.9531,2142.1743,2787.9531" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1696.4116" x2="2144.1743" y1="2787.9531" y2="2787.9531"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="134.71" x="1703.4116" y="2782.8872">clearStoredSession()</text></g><g class="message" data-participant-1="AuthViewModel" data-participant-2="MainActivity"><polygon fill="#000000" points="511.8247,2813.0859,501.8247,2817.0859,511.8247,2821.0859,507.8247,2817.0859" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="505.8247" x2="751.9087" y1="2817.0859" y2="2817.0859"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="117.5713" x="517.8247" y="2812.02">unauthenticated()</text></g><g class="message" data-participant-1="MainActivity" data-participant-2="Child"><polygon fill="#000000" points="115.8374,2842.2188,105.8374,2846.2188,115.8374,2850.2188,111.8374,2846.2188" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="109.8374" x2="499.8247" y1="2846.2188" y2="2846.2188"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="125.2012" x="121.8374" y="2841.1528">show role selection</text></g><g class="message" data-participant-1="SecurityService" data-participant-2="SecurityMonitor"><polygon fill="#000000" points="1916.3394,2871.3516,1926.3394,2875.3516,1916.3394,2879.3516,1920.3394,2875.3516" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1034.2666" x2="1922.3394" y1="2875.3516" y2="2875.3516"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="213.5415" x="1041.2666" y="2870.2856">logSecurityEvent(ROLE_SWITCH)</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2280.5571" x="5" y="2903.918"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2285.5571" y1="2903.918" y2="2903.918"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2285.5571" y1="2906.918" y2="2906.918"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="163.8999" x="1063.3286" y="2893.3516"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="145.374" x="1069.3286" y="2909.4185">Security Monitoring</text><path d="M1815,2931.4844 L1815,2956.4844 L2040,2956.4844 L2040,2941.4844 L2030,2931.4844 L1815,2931.4844" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M2030,2931.4844 L2030,2941.4844 L2040,2941.4844 L2030,2931.4844" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="204.5596" x="1821" y="2948.5513">Continuous security monitoring</text><g class="message" data-participant-1="SecurityMonitor" data-participant-2="SecurityMonitor"><line style="stroke:#000000;stroke-width:1;" x1="1928.3394" x2="1970.3394" y1="2982.75" y2="2982.75"/><line style="stroke:#000000;stroke-width:1;" x1="1970.3394" x2="1970.3394" y1="2982.75" y2="2995.75"/><line style="stroke:#000000;stroke-width:1;" x1="1929.3394" x2="1970.3394" y1="2995.75" y2="2995.75"/><polygon fill="#000000" points="1939.3394,2991.75,1929.3394,2995.75,1939.3394,2999.75,1935.3394,2995.75" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="207.835" x="1935.3394" y="2977.6841">analyze authentication patterns</text></g><g class="message" data-participant-1="SecurityMonitor" data-participant-2="SecurityMonitor"><line style="stroke:#000000;stroke-width:1;" x1="1928.3394" x2="1970.3394" y1="3024.8828" y2="3024.8828"/><line style="stroke:#000000;stroke-width:1;" x1="1970.3394" x2="1970.3394" y1="3024.8828" y2="3037.8828"/><line style="stroke:#000000;stroke-width:1;" x1="1929.3394" x2="1970.3394" y1="3037.8828" y2="3037.8828"/><polygon fill="#000000" points="1939.3394,3033.8828,1929.3394,3037.8828,1939.3394,3041.8828,1935.3394,3037.8828" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="175.8364" x="1935.3394" y="3019.8169">detect suspicious activities</text></g><path d="M143.6748,3052.8828 L208.1177,3052.8828 L208.1177,3060.0156 L198.1177,3070.0156 L143.6748,3070.0156 L143.6748,3052.8828" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="133.6641" style="stroke:#000000;stroke-width:1;" width="1869.2437" x="143.6748" y="3052.8828"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="158.6748" y="3065.9497">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="185.582" x="223.1177" y="3065.0933">[Suspicious pattern detected]</text><g class="message" data-participant-1="SecurityMonitor" data-participant-2="SecurityService"><polygon fill="#000000" points="1045.2666,3087.1484,1035.2666,3091.1484,1045.2666,3095.1484,1041.2666,3091.1484" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1039.2666" x2="1927.3394" y1="3091.1484" y2="3091.1484"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="134.0879" x="1051.2666" y="3086.0825">trigger security alert</text></g><g class="message" data-participant-1="SecurityService" data-participant-2="AuthViewModel"><polygon fill="#000000" points="763.9087,3116.2813,753.9087,3120.2813,763.9087,3124.2813,759.9087,3120.2813" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="757.9087" x2="1033.2666" y1="3120.2813" y2="3120.2813"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="78.2603" x="769.9087" y="3115.2153">force logout</text></g><g class="message" data-participant-1="AuthViewModel" data-participant-2="MainActivity"><polygon fill="#000000" points="511.8247,3145.4141,501.8247,3149.4141,511.8247,3153.4141,507.8247,3149.4141" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="505.8247" x2="751.9087" y1="3149.4141" y2="3149.4141"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="97.1445" x="517.8247" y="3144.3481">security logout</text></g><g class="message" data-participant-1="MainActivity" data-participant-2="Parent"><polygon fill="#000000" points="226.9868,3174.5469,216.9868,3178.5469,226.9868,3182.5469,222.9868,3178.5469" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="220.9868" x2="499.8247" y1="3178.5469" y2="3178.5469"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="259.9111" x="232.9868" y="3173.481">"Security alert - please re-authenticate"</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2280.5571" x="5" y="3214.1133"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2285.5571" y1="3214.1133" y2="3214.1133"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2285.5571" y1="3217.1133" y2="3217.1133"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="245.8481" x="1022.3545" y="3203.5469"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="227.3223" x="1028.3545" y="3219.6138">Token Economy Access Control</text><path d="M616,3241.6797 L616,3266.6797 L888,3266.6797 L888,3251.6797 L878,3241.6797 L616,3241.6797" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M878,3241.6797 L878,3251.6797 L888,3251.6797 L878,3241.6797" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="251.9194" x="622" y="3258.7466">Role-based access to token operations</text><g class="message" data-participant-1="Parent" data-participant-2="MainActivity"><polygon fill="#000000" points="488.8247,3288.9453,498.8247,3292.9453,488.8247,3296.9453,492.8247,3292.9453" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="215.9868" x2="494.8247" y1="3292.9453" y2="3292.9453"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="152.9468" x="222.9868" y="3287.8794">"Award tokens to child"</text></g><g class="message" data-participant-1="MainActivity" data-participant-2="AuthViewModel"><polygon fill="#000000" points="740.9087,3318.0781,750.9087,3322.0781,740.9087,3326.0781,744.9087,3322.0781" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="500.8247" x2="746.9087" y1="3322.0781" y2="3322.0781"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="228.084" x="507.8247" y="3317.0122">checkPermission(AWARD_TOKENS)</text></g><g class="message" data-participant-1="AuthViewModel" data-participant-2="SessionManager"><polygon fill="#000000" points="1684.4116,3347.2109,1694.4116,3351.2109,1684.4116,3355.2109,1688.4116,3351.2109" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="752.9087" x2="1690.4116" y1="3351.2109" y2="3351.2109"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="139.0581" x="759.9087" y="3346.145">getCurrentUserRole()</text></g><path d="M56,3366.2109 L120.4429,3366.2109 L120.4429,3373.3438 L110.4429,3383.3438 L56,3383.3438 L56,3366.2109" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="206.7344" style="stroke:#000000;stroke-width:1;" width="1724.8027" x="56" y="3366.2109"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="71" y="3379.2778">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="105.6655" x="135.4429" y="3378.4214">[User is PARENT]</text><g class="message" data-participant-1="SessionManager" data-participant-2="AuthViewModel"><polygon fill="#000000" points="763.9087,3400.4766,753.9087,3404.4766,763.9087,3408.4766,759.9087,3404.4766" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="757.9087" x2="1695.4116" y1="3404.4766" y2="3404.4766"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="125.0806" x="769.9087" y="3399.4106">return PARENT role</text></g><g class="message" data-participant-1="AuthViewModel" data-participant-2="MainActivity"><polygon fill="#000000" points="511.8247,3429.6094,501.8247,3433.6094,511.8247,3437.6094,507.8247,3433.6094" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="505.8247" x2="751.9087" y1="3433.6094" y2="3433.6094"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="126.5024" x="517.8247" y="3428.5435">permission granted</text></g><g class="message" data-participant-1="MainActivity" data-participant-2="Parent"><polygon fill="#000000" points="226.9868,3458.7422,216.9868,3462.7422,226.9868,3466.7422,222.9868,3462.7422" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="220.9868" x2="499.8247" y1="3462.7422" y2="3462.7422"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="180.9526" x="232.9868" y="3457.6763">show token award interface</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="56" x2="1780.8027" y1="3471.7422" y2="3471.7422"/><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="93.9082" x="61" y="3481.9526">[User is CHILD]</text><g class="message" data-participant-1="SessionManager" data-participant-2="AuthViewModel"><polygon fill="#000000" points="763.9087,3502.6797,753.9087,3506.6797,763.9087,3510.6797,759.9087,3506.6797" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="757.9087" x2="1695.4116" y1="3506.6797" y2="3506.6797"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="113.3755" x="769.9087" y="3501.6138">return CHILD role</text></g><g class="message" data-participant-1="AuthViewModel" data-participant-2="MainActivity"><polygon fill="#000000" points="511.8247,3531.8125,501.8247,3535.8125,511.8247,3539.8125,507.8247,3535.8125" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="505.8247" x2="751.9087" y1="3535.8125" y2="3535.8125"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="119.7041" x="517.8247" y="3530.7466">permission denied</text></g><g class="message" data-participant-1="MainActivity" data-participant-2="Child"><polygon fill="#000000" points="115.8374,3560.9453,105.8374,3564.9453,115.8374,3568.9453,111.8374,3564.9453" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="109.8374" x2="499.8247" y1="3564.9453" y2="3564.9453"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="235.5996" x="121.8374" y="3559.8794">"This feature requires parent mode"</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2280.5571" x="5" y="3600.5117"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2285.5571" y1="3600.5117" y2="3600.5117"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2285.5571" y1="3603.5117" y2="3603.5117"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="162.2622" x="1064.1475" y="3589.9453"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="143.7363" x="1070.1475" y="3606.0122">Secure Data Access</text><path d="M2019,3628.0781 L2019,3653.0781 L2280,3653.0781 L2280,3638.0781 L2270,3628.0781 L2019,3628.0781" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M2270,3628.0781 L2270,3638.0781 L2280,3638.0781 L2270,3628.0781" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="240.5571" x="2025" y="3645.145">Encrypted data storage and retrieval</text><g class="message" data-participant-1="AuthViewModel" data-participant-2="DataStore"><polygon fill="#000000" points="2138.1743,3675.3438,2148.1743,3679.3438,2138.1743,3683.3438,2142.1743,3679.3438" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="752.9087" x2="2144.1743" y1="3679.3438" y2="3679.3438"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="92.1616" x="759.9087" y="3674.2778">getUserData()</text></g><g class="message" data-participant-1="DataStore" data-participant-2="AndroidKeystore"><polygon fill="#000000" points="1327.3154,3704.4766,1317.3154,3708.4766,1327.3154,3712.4766,1323.3154,3708.4766" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1321.3154" x2="2149.1743" y1="3708.4766" y2="3708.4766"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="125.4995" x="1333.3154" y="3703.4106">getEncryptionKey()</text></g><g class="message" data-participant-1="AndroidKeystore" data-participant-2="DataStore"><polygon fill="#000000" points="2138.1743,3733.6094,2148.1743,3737.6094,2138.1743,3741.6094,2142.1743,3737.6094" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1316.3154" x2="2144.1743" y1="3737.6094" y2="3737.6094"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="141.3242" x="1323.3154" y="3732.5435">return encryption key</text></g><g class="message" data-participant-1="DataStore" data-participant-2="DataStore"><line style="stroke:#000000;stroke-width:1;" x1="2150.1743" x2="2192.1743" y1="3766.7422" y2="3766.7422"/><line style="stroke:#000000;stroke-width:1;" x1="2192.1743" x2="2192.1743" y1="3766.7422" y2="3779.7422"/><line style="stroke:#000000;stroke-width:1;" x1="2151.1743" x2="2192.1743" y1="3779.7422" y2="3779.7422"/><polygon fill="#000000" points="2161.1743,3775.7422,2151.1743,3779.7422,2161.1743,3783.7422,2157.1743,3779.7422" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="90.9683" x="2157.1743" y="3761.6763">decryptData()</text></g><g class="message" data-participant-1="DataStore" data-participant-2="AuthViewModel"><polygon fill="#000000" points="763.9087,3804.875,753.9087,3808.875,763.9087,3812.875,759.9087,3808.875" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="757.9087" x2="2149.1743" y1="3808.875" y2="3808.875"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="176.3315" x="769.9087" y="3803.8091">return decrypted user data</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2280.5571" x="5" y="3837.4414"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2285.5571" y1="3837.4414" y2="3837.4414"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2285.5571" y1="3840.4414" y2="3840.4414"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="125.7822" x="1082.3875" y="3826.875"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="107.2563" x="1088.3875" y="3842.9419">Error Handling</text><path d="M952,3865.0078 L952,3890.0078 L1114,3890.0078 L1114,3875.0078 L1104,3865.0078 L952,3865.0078" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1104,3865.0078 L1104,3875.0078 L1114,3875.0078 L1104,3865.0078" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="141.6416" x="958" y="3882.0747">Secure error handling</text><g class="message" data-participant-1="SecurityService" data-participant-2="SecurityMonitor"><polygon fill="#000000" points="1916.3394,3912.2734,1926.3394,3916.2734,1916.3394,3920.2734,1920.3394,3916.2734" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1034.2666" x2="1922.3394" y1="3916.2734" y2="3916.2734"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="246.8223" x="1041.2666" y="3911.2075">logSecurityEvent(ERROR_OCCURRED)</text></g><g class="message" data-participant-1="SecurityService" data-participant-2="AuthViewModel"><polygon fill="#000000" points="763.9087,3941.4063,753.9087,3945.4063,763.9087,3949.4063,759.9087,3945.4063" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="757.9087" x2="1033.2666" y1="3945.4063" y2="3945.4063"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="129.105" x="769.9087" y="3940.3403">return generic error</text></g><g class="message" data-participant-1="AuthViewModel" data-participant-2="MainActivity"><polygon fill="#000000" points="511.8247,3970.5391,501.8247,3974.5391,511.8247,3978.5391,507.8247,3974.5391" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="505.8247" x2="751.9087" y1="3974.5391" y2="3974.5391"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="156.2222" x="517.8247" y="3969.4731">show user-friendly error</text></g><g class="message" data-participant-1="MainActivity" data-participant-2="Parent"><polygon fill="#000000" points="226.9868,3999.6719,216.9868,4003.6719,226.9868,4007.6719,222.9868,4003.6719" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="220.9868" x2="499.8247" y1="4003.6719" y2="4003.6719"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="260.8379" x="232.9868" y="3998.606">"Authentication failed, please try again"</text></g><path d="M906,4016.6719 L906,4041.6719 L1162,4041.6719 L1162,4026.6719 L1152,4016.6719 L906,4016.6719" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1152,4016.6719 L1152,4026.6719 L1162,4026.6719 L1152,4016.6719" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="235.0474" x="912" y="4033.7388">Never expose sensitive error details</text><!--SRC=[pLZTRo8t47_VlyBbvK0YggggBr5p4iSH1LqI8Y1tZv6pEu2LnRkrlQJqh-zuxFraWIMjrDv3Bl7EpnxFnszc_9FPm1PO6dCXWy084mCRARF9r2VDxiKA_qfJTiMUDIWsob1Q6X5o8nB9RkFaFGXuQ1B5nXiHHunhrdE_MVcU__R45QBee_lrvp7-jnOxAv9oXHkAbAF40oen2etO2RCdyUf2NTIgybt0-qCIGKoojPL3uGMedGYX4FL_rmKN46OApweADzOQEyj89IBw1dkDD_MxkpMMBzOHNqIo1QD4Q9KW-MAbOT-cQbhZuWENV8skS9fLbzflyf18ONrGlGdpYtN4LsxuehX4yLSl26vks1G1WiSK3FSya-66tTm4WVFrrUUQvwvp2PwcGSsbA5ZpqZKBDn2-aJiCDz0V17M_8g1-oMks1ZFEb8qY_mL13TiWgb2V0FHRLCgNLsqvG879b6JQBRC8PJ78uy833FuKscZ6PSHsF1PHmF3VeGgDc_fj2P5lJiY36zTjoSkOWAW_lflUVnqGhcbPyiKrqvla7Srg_H9nlNbDk8e2Y3LKz4y5ceDXL0Xv-Gra5iTT5CzaNVNpMgi4oKT3327HYmuLW0n0HXI2S_jrKNmz4NvkYvo9h7gzSt6emLZ6icVaDZvplOgTXJIWLZm4qjEpdOMnKHYYLKbNltnKsGhihBOA_iX06mUnt_hTr7sQFZ94g7rkMz8N5nl4VafVi9Ure7DALhtVJuLipUqQjLwxx43v9o4Tf4d8zfWwvL9SAW4xS5cEq3kCUskH1ZUt7UXZEdMWjkCE866oHTe4Am-wJ-QWKuUCZediXu5Z36lQxvK4ExpBKPDH0cGKFgliIBurcGjzYhRBQUvfD9yyBWT7Shj2aAHsZlBCP3yFkj52JfJkzEXoJgigsemf5uK-V5CNaYMjMGJz-5GObyN9UYta-fZ56tNnsihdQvCTRjyVFI_lNXRFu_5aiHXKZy1B9LSedcI66R45TSG-JRTeWrNMWky9kxJG_cziAsHcGFiZYA5jl4nhb7nXnAouY8-vu22GXKINRH5zIwYHCR1DZUuF_g7jRaVJ- -Vvf68xcmlk4CRzAUntzYjzwn0kv7nGAb53IlPz0JmMBhsf31Di4aBAmI6pbCVNADmZA1cxgT3dcuf67ImVXac6qHWduPitUTUhM8WD8a_2PoypgXt5LbYuVodYftTAvmuU6uzdpu_Bb_lP-Dl4TnQsukPLTvRQmCBExrYNIiL29WPOieEyrn_MsznhDegH9YK2Tj2CMHJR9D7v0edrkTorQucigT5M9HjwrehM8AWtwst51-yiLdlscWksLPt66OKiAgcpsBXQKTftuMYVN76em7zMCVvVjF-XOFyodJrCblFf-AM5v8aKIY_SbbHweHDEaN3T82iUnwyyV6CceOxg90kKgha3XcKhrllNJ59mTvx_-T3W0i5MYqR2DqCg1zWAQKdEZadR0Xm4v-ibpOH5VFbzQXCO3ub8teNPY5BYeh1rHROs5-KQmvyXG0JHPHlwgQgBsrqFSMGWQWx8CN1LJgwTiZf2ubF9leuwsGAwKnfJyeTZQe59DPqzlYod3vFPyvaKnoC55MhCWVe0s9ZyqDiuRibr8_veo1iMsvLYhs3UiRpw6Ss6eIUIBTfD7wytFRU5rUU20RBmwUNUkTmp5q_UtQVku4CUdy_k9o-B7zFb-6xWQQF-r7JejuDDnmagBBCaqwYDHsyBT10qNxJQ54CJnlk_3bgCr3PvIkfEUqHWR3ZgJASY55OTxYmdRDGG3PMV_CuU1FNQr79AqNmZaQ-jjukhyXYKwTZrOmU8woxakX2EhWn7EUHedLdKD69NBCKGH9fKS5KDgrwHdila3TDi4YOosUxp9m_hJOoiXjCRzx29VVMAcqUsdROmJ3f3soKfA7BUgKmTlMCxu004fLJlTNfpV0Ar5IwVHZz6ywylozctoUFYeWV8uiN8Z_lqHYuqSvtDHOzg3aAvsCMXQQ4zMoikyy0xsKOvkt8oMVbYHHKmLvnUlYxIcn0VKJi2AOvexScfjzoWIYliBZC5rCzZdT1L4kzLkfJG2bdUhBwvbO5NOTG9Zhtx54r6Jxlq-e5tf0BXNv9u71o6GVr5sLhChZGVam_c0vJr1-AjSRdzNQgokJSi523s1llw8HNf24YiLPLMXta0tZwpJdUlssZ1YHslsHrQ8JxErGLxUNlJJCus7XHyh7PCvlFP_6Ks7Z_FvtO2FKz__Yfha63ROTAYq_kdlVBL2bsC2kyzxlZKtTRL3tCshBmed3BK8zXbx0qJROkir88wLsSuB1gugGx-1W00]--></g></svg>