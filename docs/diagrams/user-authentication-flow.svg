<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1774px" preserveAspectRatio="none" style="width:2028px;height:1774px;background:#FFFFFF;" version="1.1" viewBox="0 0 2028 1774" width="2028px" zoomAndPan="magnify"><title>Arthur's Life App - User Authentication Flow (v1, 2025-07)</title><defs/><g><text fill="#000000" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="723.4326" x="650.866" y="35.4209">Arthur's Life App - User Authentication Flow (v1, 2025-07)</text><rect fill="#FFFFFF" height="206.7344" style="stroke:#000000;stroke-width:1;" width="1560.8364" x="15" y="334.7031"/><rect fill="#FFFFFF" height="102.2031" style="stroke:none;stroke-width:1;" width="1560.8364" x="15" y="439.2344"/><rect fill="#FFFFFF" height="323.2656" style="stroke:#000000;stroke-width:1;" width="1908.4897" x="102.6748" y="1047.4297"/><rect fill="#FFFFFF" height="131.3359" style="stroke:none;stroke-width:1;" width="1908.4897" x="102.6748" y="1239.3594"/><g><title>Child User</title><rect fill="#000000" fill-opacity="0.00000" height="1564.1172" width="8" x="59.8374" y="128.9063"/><line style="stroke:#000000;stroke-width:1;" x1="63" x2="63" y1="128.9063" y2="1693.0234"/></g><g><title>Parent.Caregiver</title><rect fill="#000000" fill-opacity="0.00000" height="1564.1172" width="8" x="170.9868" y="128.9063"/><line style="stroke:#000000;stroke-width:1;" x1="174.6748" x2="174.6748" y1="128.9063" y2="1693.0234"/></g><g><title>MainActivity</title><rect fill="#000000" fill-opacity="0.00000" height="1564.1172" width="8" x="367.2051" y="128.9063"/><line style="stroke:#000000;stroke-width:1;" x1="371.1934" x2="371.1934" y1="128.9063" y2="1693.0234"/></g><g><title>AuthViewModel</title><rect fill="#000000" fill-opacity="0.00000" height="1564.1172" width="8" x="543.9424" y="128.9063"/><line style="stroke:#000000;stroke-width:1;" x1="547.7539" x2="547.7539" y1="128.9063" y2="1693.0234"/></g><g><title>AuthService</title><rect fill="#000000" fill-opacity="0.00000" height="1564.1172" width="8" x="684.4077" y="128.9063"/><line style="stroke:#000000;stroke-width:1;" x1="688.1309" x2="688.1309" y1="128.9063" y2="1693.0234"/></g><g><title>SecurityService</title><rect fill="#000000" fill-opacity="0.00000" height="1564.1172" width="8" x="825.3003" y="128.9063"/><line style="stroke:#000000;stroke-width:1;" x1="828.6846" x2="828.6846" y1="128.9063" y2="1693.0234"/></g><g><title>Android Keystore</title><rect fill="#000000" fill-opacity="0.00000" height="1564.1172" width="8" x="1107.3491" y="128.9063"/><line style="stroke:#000000;stroke-width:1;" x1="1111.0083" x2="1111.0083" y1="128.9063" y2="1693.0234"/></g><g><title>Biometric Authentication</title><rect fill="#000000" fill-opacity="0.00000" height="1564.1172" width="8" x="1298.8721" y="128.9063"/><line style="stroke:#000000;stroke-width:1;" x1="1302.6899" x2="1302.6899" y1="128.9063" y2="1693.0234"/></g><g><title>SessionManager</title><rect fill="#000000" fill-opacity="0.00000" height="1564.1172" width="8" x="1487.4453" y="128.9063"/><line style="stroke:#000000;stroke-width:1;" x1="1491.0542" x2="1491.0542" y1="128.9063" y2="1693.0234"/></g><g><title>Security Monitor</title><rect fill="#000000" fill-opacity="0.00000" height="1564.1172" width="8" x="1646.4155" y="128.9063"/><line style="stroke:#000000;stroke-width:1;" x1="1649.8364" x2="1649.8364" y1="128.9063" y2="1693.0234"/></g><g><title>DataStore</title><rect fill="#000000" fill-opacity="0.00000" height="1564.1172" width="8" x="1783.3638" y="128.9063"/><line style="stroke:#000000;stroke-width:1;" x1="1786.9946" x2="1786.9946" y1="128.9063" y2="1693.0234"/></g><g><title>Audit</title><rect fill="#000000" fill-opacity="0.00000" height="1564.1172" width="8" x="1881.0908" y="128.9063"/><line style="stroke:#000000;stroke-width:1;" x1="1884.7329" x2="1884.7329" y1="128.9063" y2="1693.0234"/></g><g><title>Audit</title><rect fill="#000000" fill-opacity="0.00000" height="1564.1172" width="8" x="1961.8066" y="128.9063"/><line style="stroke:#000000;stroke-width:1;" x1="1965.4487" x2="1965.4487" y1="128.9063" y2="1693.0234"/></g><g class="participant participant-head" data-participant="Child"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="71.6748" x="25" y="125.6045">Child User</text><ellipse cx="63.8374" cy="60.6094" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><path d="M63.8374,68.6094 L63.8374,95.6094 M50.8374,76.6094 L76.8374,76.6094 M63.8374,95.6094 L50.8374,110.6094 M63.8374,95.6094 L76.8374,110.6094" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-tail" data-participant="Child"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="71.6748" x="25" y="1705.0186">Child User</text><ellipse cx="63.8374" cy="1717.3203" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><path d="M63.8374,1725.3203 L63.8374,1752.3203 M50.8374,1733.3203 L76.8374,1733.3203 M63.8374,1752.3203 L50.8374,1767.3203 M63.8374,1752.3203 L76.8374,1767.3203" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-head" data-participant="Parent"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="118.624" x="112.6748" y="125.6045">Parent/Caregiver</text><ellipse cx="174.9868" cy="60.6094" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><path d="M174.9868,68.6094 L174.9868,95.6094 M161.9868,76.6094 L187.9868,76.6094 M174.9868,95.6094 L161.9868,110.6094 M174.9868,95.6094 L187.9868,110.6094" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-tail" data-participant="Parent"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="118.624" x="112.6748" y="1705.0186">Parent/Caregiver</text><ellipse cx="174.9868" cy="1717.3203" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><path d="M174.9868,1725.3203 L174.9868,1752.3203 M161.9868,1733.3203 L187.9868,1733.3203 M174.9868,1752.3203 L161.9868,1767.3203 M174.9868,1752.3203 L187.9868,1767.3203" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-head" data-participant="MainActivity"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="100.0234" x="321.1934" y="97.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="86.0234" x="328.1934" y="117.6045">MainActivity</text></g><g class="participant participant-tail" data-participant="MainActivity"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="100.0234" x="321.1934" y="1692.0234"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="86.0234" x="328.1934" y="1712.0186">MainActivity</text></g><g class="participant participant-head" data-participant="AuthViewModel"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="122.377" x="486.7539" y="97.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="108.377" x="493.7539" y="117.6045">AuthViewModel</text></g><g class="participant participant-tail" data-participant="AuthViewModel"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="122.377" x="486.7539" y="1692.0234"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="108.377" x="493.7539" y="1712.0186">AuthViewModel</text></g><g class="participant participant-head" data-participant="AuthService"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="98.5537" x="639.1309" y="97.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="84.5537" x="646.1309" y="117.6045">AuthService</text></g><g class="participant participant-tail" data-participant="AuthService"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="98.5537" x="639.1309" y="1692.0234"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="84.5537" x="646.1309" y="1712.0186">AuthService</text></g><g class="participant participant-head" data-participant="SecurityService"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="123.2314" x="767.6846" y="97.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="109.2314" x="774.6846" y="117.6045">SecurityService</text></g><g class="participant participant-tail" data-participant="SecurityService"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="123.2314" x="767.6846" y="1692.0234"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="109.2314" x="774.6846" y="1712.0186">SecurityService</text></g><g class="participant participant-head" data-participant="AndroidKeystore"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="134.6816" x="1044.0083" y="97.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="120.6816" x="1051.0083" y="117.6045">Android Keystore</text></g><g class="participant participant-tail" data-participant="AndroidKeystore"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="134.6816" x="1044.0083" y="1692.0234"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="120.6816" x="1051.0083" y="1712.0186">Android Keystore</text></g><g class="participant participant-head" data-participant="BiometricAuth"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="188.3643" x="1208.6899" y="97.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="174.3643" x="1215.6899" y="117.6045">Biometric Authentication</text></g><g class="participant participant-tail" data-participant="BiometricAuth"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="188.3643" x="1208.6899" y="1692.0234"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="174.3643" x="1215.6899" y="1712.0186">Biometric Authentication</text></g><g class="participant participant-head" data-participant="SessionManager"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="128.7822" x="1427.0542" y="97.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="114.7822" x="1434.0542" y="117.6045">SessionManager</text></g><g class="participant participant-tail" data-participant="SessionManager"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="128.7822" x="1427.0542" y="1692.0234"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="114.7822" x="1434.0542" y="1712.0186">SessionManager</text></g><g class="participant participant-head" data-participant="SecurityMonitor"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="129.1582" x="1585.8364" y="97.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="115.1582" x="1592.8364" y="117.6045">Security Monitor</text></g><g class="participant participant-tail" data-participant="SecurityMonitor"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="129.1582" x="1585.8364" y="1692.0234"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="115.1582" x="1592.8364" y="1712.0186">Security Monitor</text></g><g class="participant participant-head" data-participant="DataStore"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="84.7383" x="1744.9946" y="97.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="70.7383" x="1751.9946" y="117.6045">DataStore</text></g><g class="participant participant-tail" data-participant="DataStore"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="84.7383" x="1744.9946" y="1692.0234"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="70.7383" x="1751.9946" y="1712.0186">DataStore</text></g><g class="participant participant-head" data-participant="AuditTrail"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="50.7158" x="1859.7329" y="97.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="36.7158" x="1866.7329" y="117.6045">Audit</text></g><g class="participant participant-tail" data-participant="AuditTrail"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="50.7158" x="1859.7329" y="1692.0234"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="36.7158" x="1866.7329" y="1712.0186">Audit</text></g><g class="participant participant-head" data-participant="Audit"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="50.7158" x="1940.4487" y="97.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="36.7158" x="1947.4487" y="117.6045">Audit</text></g><g class="participant participant-tail" data-participant="Audit"><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="50.7158" x="1940.4487" y="1692.0234"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="36.7158" x="1947.4487" y="1712.0186">Audit</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2016.1646" x="5" y="159.4727"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2021.1646" y1="159.4727" y2="159.4727"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2021.1646" y1="162.4727" y2="162.4727"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="151.2236" x="937.4705" y="148.9063"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="132.6978" x="943.4705" y="164.9731">Initial App Launch</text><g class="message" data-participant-1="Child" data-participant-2="MainActivity"><polygon fill="#000000" points="359.2051,199.1719,369.2051,203.1719,359.2051,207.1719,363.2051,203.1719" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="63.8374" x2="365.2051" y1="203.1719" y2="203.1719"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="75.6768" x="70.8374" y="198.106">Launch app</text></g><g class="message" data-participant-1="MainActivity" data-participant-2="AuthViewModel"><polygon fill="#000000" points="535.9424,228.3047,545.9424,232.3047,535.9424,236.3047,539.9424,232.3047" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="371.2051" x2="541.9424" y1="232.3047" y2="232.3047"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="113.0835" x="378.2051" y="227.2388">checkAuthState()</text></g><g class="message" data-participant-1="AuthViewModel" data-participant-2="SessionManager"><polygon fill="#000000" points="1479.4453,257.4375,1489.4453,261.4375,1479.4453,265.4375,1483.4453,261.4375" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="547.9424" x2="1485.4453" y1="261.4375" y2="261.4375"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="130.4316" x="554.9424" y="256.3716">getCurrentSession()</text></g><g class="message" data-participant-1="SessionManager" data-participant-2="DataStore"><polygon fill="#000000" points="1775.3638,286.5703,1785.3638,290.5703,1775.3638,294.5703,1779.3638,290.5703" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1491.4453" x2="1781.3638" y1="290.5703" y2="290.5703"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="123.9888" x="1498.4453" y="285.5044">getStoredSession()</text></g><g class="message" data-participant-1="DataStore" data-participant-2="SessionManager"><polygon fill="#000000" points="1502.4453,315.7031,1492.4453,319.7031,1502.4453,323.7031,1498.4453,319.7031" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1496.4453" x2="1786.3638" y1="319.7031" y2="319.7031"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="125.9312" x="1508.4453" y="314.6372">return session data</text></g><path d="M15,334.7031 L79.4429,334.7031 L79.4429,341.8359 L69.4429,351.8359 L15,351.8359 L15,334.7031" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="206.7344" style="stroke:#000000;stroke-width:1;" width="1560.8364" x="15" y="334.7031"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="30" y="347.77">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="158.9951" x="94.4429" y="346.9136">[Session exists and valid]</text><g class="message" data-participant-1="SessionManager" data-participant-2="AuthViewModel"><polygon fill="#000000" points="558.9424,368.9688,548.9424,372.9688,558.9424,376.9688,554.9424,372.9688" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="552.9424" x2="1490.4453" y1="372.9688" y2="372.9688"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="127.7847" x="564.9424" y="367.9028">return valid session</text></g><g class="message" data-participant-1="AuthViewModel" data-participant-2="MainActivity"><polygon fill="#000000" points="382.2051,398.1016,372.2051,402.1016,382.2051,406.1016,378.2051,402.1016" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="376.2051" x2="546.9424" y1="402.1016" y2="402.1016"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="141.0322" x="388.2051" y="397.0356">authenticated(CHILD)</text></g><g class="message" data-participant-1="MainActivity" data-participant-2="Child"><polygon fill="#000000" points="74.8374,427.2344,64.8374,431.2344,74.8374,435.2344,70.8374,431.2344" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="68.8374" x2="370.2051" y1="431.2344" y2="431.2344"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="141.7241" x="80.8374" y="426.1685">show child dashboard</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="15" x2="1575.8364" y1="440.2344" y2="440.2344"/><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="170.731" x="20" y="450.4448">[Session expired or invalid]</text><g class="message" data-participant-1="SessionManager" data-participant-2="AuthViewModel"><polygon fill="#000000" points="558.9424,471.1719,548.9424,475.1719,558.9424,479.1719,554.9424,475.1719" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="552.9424" x2="1490.4453" y1="475.1719" y2="475.1719"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="68.0977" x="564.9424" y="470.106">return null</text></g><g class="message" data-participant-1="AuthViewModel" data-participant-2="MainActivity"><polygon fill="#000000" points="382.2051,500.3047,372.2051,504.3047,382.2051,508.3047,378.2051,504.3047" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="376.2051" x2="546.9424" y1="504.3047" y2="504.3047"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="117.5713" x="388.2051" y="499.2388">unauthenticated()</text></g><g class="message" data-participant-1="MainActivity" data-participant-2="Child"><polygon fill="#000000" points="74.8374,529.4375,64.8374,533.4375,74.8374,537.4375,70.8374,533.4375" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="68.8374" x2="370.2051" y1="533.4375" y2="533.4375"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="172.834" x="80.8374" y="528.3716">show role selection screen</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2016.1646" x="5" y="569.0039"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2021.1646" y1="569.0039" y2="569.0039"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2021.1646" y1="572.0039" y2="572.0039"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="123.2813" x="951.4417" y="558.4375"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="104.7554" x="957.4417" y="574.5044">Role Selection</text><g class="message" data-participant-1="Child" data-participant-2="MainActivity"><polygon fill="#000000" points="359.2051,608.7031,369.2051,612.7031,359.2051,616.7031,363.2051,612.7031" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="63.8374" x2="365.2051" y1="612.7031" y2="612.7031"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="127.061" x="70.8374" y="607.6372">select "Child Mode"</text></g><g class="message" data-participant-1="MainActivity" data-participant-2="AuthViewModel"><polygon fill="#000000" points="535.9424,637.8359,545.9424,641.8359,535.9424,645.8359,539.9424,641.8359" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="371.2051" x2="541.9424" y1="641.8359" y2="641.8359"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="128.1782" x="378.2051" y="636.77">setUserRole(CHILD)</text></g><g class="message" data-participant-1="AuthViewModel" data-participant-2="MainActivity"><polygon fill="#000000" points="382.2051,666.9688,372.2051,670.9688,382.2051,674.9688,378.2051,670.9688" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="376.2051" x2="546.9424" y1="670.9688" y2="670.9688"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="130.7046" x="388.2051" y="665.9028">show child interface</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2016.1646" x="5" y="699.5352"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2021.1646" y1="699.5352" y2="699.5352"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2021.1646" y1="702.5352" y2="702.5352"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="166.3311" x="929.9167" y="688.9688"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="147.8052" x="935.9167" y="705.0356">Parent Mode Access</text><g class="message" data-participant-1="Parent" data-participant-2="MainActivity"><polygon fill="#000000" points="359.2051,739.2344,369.2051,743.2344,359.2051,747.2344,363.2051,743.2344" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="174.9868" x2="365.2051" y1="743.2344" y2="743.2344"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="136.7539" x="181.9868" y="738.1685">select "Parent Mode"</text></g><g class="message" data-participant-1="MainActivity" data-participant-2="AuthViewModel"><polygon fill="#000000" points="535.9424,768.3672,545.9424,772.3672,535.9424,776.3672,539.9424,772.3672" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="371.2051" x2="541.9424" y1="772.3672" y2="772.3672"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="132.7993" x="378.2051" y="767.3013">requestParentAuth()</text></g><g class="message" data-participant-1="AuthViewModel" data-participant-2="MainActivity"><polygon fill="#000000" points="382.2051,797.5,372.2051,801.5,382.2051,805.5,378.2051,801.5" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="376.2051" x2="546.9424" y1="801.5" y2="801.5"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="145.2661" x="388.2051" y="796.4341">show PIN entry screen</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2016.1646" x="5" y="830.0664"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2021.1646" y1="830.0664" y2="830.0664"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2021.1646" y1="833.0664" y2="833.0664"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="157.1587" x="934.5029" y="819.5"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="138.6328" x="940.5029" y="835.5669">PIN Authentication</text><g class="message" data-participant-1="Parent" data-participant-2="MainActivity"><polygon fill="#000000" points="359.2051,869.7656,369.2051,873.7656,359.2051,877.7656,363.2051,873.7656" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="174.9868" x2="365.2051" y1="873.7656" y2="873.7656"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="60.2075" x="181.9868" y="868.6997">enter PIN</text></g><g class="message" data-participant-1="MainActivity" data-participant-2="AuthViewModel"><polygon fill="#000000" points="535.9424,898.8984,545.9424,902.8984,535.9424,906.8984,539.9424,902.8984" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="371.2051" x2="541.9424" y1="902.8984" y2="902.8984"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="112.9438" x="378.2051" y="897.8325">authenticate(pin)</text></g><g class="message" data-participant-1="AuthViewModel" data-participant-2="SecurityService"><polygon fill="#000000" points="817.3003,928.0313,827.3003,932.0313,817.3003,936.0313,821.3003,932.0313" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="547.9424" x2="823.3003" y1="932.0313" y2="932.0313"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="102.1338" x="554.9424" y="926.9653">validatePin(pin)</text></g><g class="message" data-participant-1="SecurityService" data-participant-2="AndroidKeystore"><polygon fill="#000000" points="1099.3491,957.1641,1109.3491,961.1641,1099.3491,965.1641,1103.3491,961.1641" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="829.3003" x2="1105.3491" y1="961.1641" y2="961.1641"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="156.5713" x="836.3003" y="956.0981">retrieveStoredPinHash()</text></g><g class="message" data-participant-1="AndroidKeystore" data-participant-2="SecurityService"><polygon fill="#000000" points="840.3003,986.2969,830.3003,990.2969,840.3003,994.2969,836.3003,990.2969" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="834.3003" x2="1110.3491" y1="990.2969" y2="990.2969"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="97.2524" x="846.3003" y="985.231">return pinHash</text></g><g class="message" data-participant-1="SecurityService" data-participant-2="SecurityService"><line style="stroke:#000000;stroke-width:1;" x1="829.3003" x2="871.3003" y1="1019.4297" y2="1019.4297"/><line style="stroke:#000000;stroke-width:1;" x1="871.3003" x2="871.3003" y1="1019.4297" y2="1032.4297"/><line style="stroke:#000000;stroke-width:1;" x1="830.3003" x2="871.3003" y1="1032.4297" y2="1032.4297"/><polygon fill="#000000" points="840.3003,1028.4297,830.3003,1032.4297,840.3003,1036.4297,836.3003,1032.4297" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="268.0488" x="836.3003" y="1014.3638">compareHashes(enteredPin, storedHash)</text></g><path d="M102.6748,1047.4297 L167.1177,1047.4297 L167.1177,1054.5625 L157.1177,1064.5625 L102.6748,1064.5625 L102.6748,1047.4297" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="323.2656" style="stroke:#000000;stroke-width:1;" width="1908.4897" x="102.6748" y="1047.4297"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="117.6748" y="1060.4966">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="66.5962" x="182.1177" y="1059.6401">[PIN Valid]</text><g class="message" data-participant-1="SecurityService" data-participant-2="AuthViewModel"><polygon fill="#000000" points="558.9424,1081.6953,548.9424,1085.6953,558.9424,1089.6953,554.9424,1085.6953" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="552.9424" x2="828.3003" y1="1085.6953" y2="1085.6953"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="165.915" x="564.9424" y="1080.6294">authentication successful</text></g><g class="message" data-participant-1="AuthViewModel" data-participant-2="SessionManager"><polygon fill="#000000" points="1479.4453,1110.8281,1489.4453,1114.8281,1479.4453,1118.8281,1483.4453,1114.8281" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="547.9424" x2="1485.4453" y1="1114.8281" y2="1114.8281"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="152.9404" x="554.9424" y="1109.7622">createSession(PARENT)</text></g><g class="message" data-participant-1="SessionManager" data-participant-2="DataStore"><polygon fill="#000000" points="1775.3638,1139.9609,1785.3638,1143.9609,1775.3638,1147.9609,1779.3638,1143.9609" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1491.4453" x2="1781.3638" y1="1143.9609" y2="1143.9609"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="172.0723" x="1498.4453" y="1138.895">storeSession(sessionData)</text></g><g class="message" data-participant-1="AuthViewModel" data-participant-2="Audit"><polygon fill="#000000" points="1953.8066,1169.0938,1963.8066,1173.0938,1953.8066,1177.0938,1957.8066,1173.0938" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="547.9424" x2="1959.8066" y1="1173.0938" y2="1173.0938"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="107.7451" x="554.9424" y="1168.0278">logParentLogin()</text></g><g class="message" data-participant-1="AuthViewModel" data-participant-2="MainActivity"><polygon fill="#000000" points="382.2051,1198.2266,372.2051,1202.2266,382.2051,1206.2266,378.2051,1202.2266" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="376.2051" x2="546.9424" y1="1202.2266" y2="1202.2266"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="152.7373" x="388.2051" y="1197.1606">authenticated(PARENT)</text></g><g class="message" data-participant-1="MainActivity" data-participant-2="Parent"><polygon fill="#000000" points="185.9868,1227.3594,175.9868,1231.3594,185.9868,1235.3594,181.9868,1231.3594" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="179.9868" x2="370.2051" y1="1231.3594" y2="1231.3594"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="172.2183" x="191.9868" y="1226.2935">show caregiver dashboard</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="102.6748" x2="2011.1646" y1="1240.3594" y2="1240.3594"/><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="77.1772" x="107.6748" y="1250.5698">[PIN Invalid]</text><g class="message" data-participant-1="SecurityService" data-participant-2="SecurityMonitor"><polygon fill="#000000" points="1638.4155,1271.2969,1648.4155,1275.2969,1638.4155,1279.2969,1642.4155,1275.2969" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="829.3003" x2="1644.4155" y1="1275.2969" y2="1275.2969"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="121.9766" x="836.3003" y="1270.231">logFailedAttempt()</text></g><g class="message" data-participant-1="SecurityService" data-participant-2="Audit"><polygon fill="#000000" points="1953.8066,1300.4297,1963.8066,1304.4297,1953.8066,1308.4297,1957.8066,1304.4297" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="829.3003" x2="1959.8066" y1="1304.4297" y2="1304.4297"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="88.5688" x="836.3003" y="1299.3638">logFailedPin()</text></g><g class="message" data-participant-1="AuthViewModel" data-participant-2="MainActivity"><polygon fill="#000000" points="382.2051,1329.5625,372.2051,1333.5625,382.2051,1337.5625,378.2051,1333.5625" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="376.2051" x2="546.9424" y1="1333.5625" y2="1333.5625"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="143.5649" x="388.2051" y="1328.4966">authenticationFailed()</text></g><g class="message" data-participant-1="MainActivity" data-participant-2="Parent"><polygon fill="#000000" points="185.9868,1358.6953,175.9868,1362.6953,185.9868,1366.6953,181.9868,1362.6953" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="179.9868" x2="370.2051" y1="1362.6953" y2="1362.6953"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="69.7163" x="191.9868" y="1357.6294">show error</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2016.1646" x="5" y="1398.2617"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2021.1646" y1="1398.2617" y2="1398.2617"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2021.1646" y1="1401.2617" y2="1401.2617"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="202.3604" x="911.9021" y="1387.6953"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="183.8345" x="917.9021" y="1403.7622">Biometric Authentication</text><g class="message" data-participant-1="Parent" data-participant-2="MainActivity"><polygon fill="#000000" points="359.2051,1437.9609,369.2051,1441.9609,359.2051,1445.9609,363.2051,1441.9609" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="174.9868" x2="365.2051" y1="1441.9609" y2="1441.9609"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="140.2388" x="181.9868" y="1436.895">select biometric login</text></g><g class="message" data-participant-1="MainActivity" data-participant-2="BiometricAuth"><polygon fill="#000000" points="1290.8721,1467.0938,1300.8721,1471.0938,1290.8721,1475.0938,1294.8721,1471.0938" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="371.2051" x2="1296.8721" y1="1471.0938" y2="1471.0938"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="92.8408" x="378.2051" y="1466.0278">authenticate()</text></g><g class="message" data-participant-1="BiometricAuth" data-participant-2="SecurityService"><polygon fill="#000000" points="840.3003,1496.2266,830.3003,1500.2266,840.3003,1504.2266,836.3003,1500.2266" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="834.3003" x2="1301.8721" y1="1500.2266" y2="1500.2266"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="124.687" x="846.3003" y="1495.1606">validateBiometric()</text></g><g class="message" data-participant-1="SecurityService" data-participant-2="AuthViewModel"><polygon fill="#000000" points="558.9424,1525.3594,548.9424,1529.3594,558.9424,1533.3594,554.9424,1529.3594" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="552.9424" x2="828.3003" y1="1529.3594" y2="1529.3594"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="165.915" x="564.9424" y="1524.2935">authentication successful</text></g><g class="message" data-participant-1="AuthViewModel" data-participant-2="SessionManager"><polygon fill="#000000" points="1479.4453,1554.4922,1489.4453,1558.4922,1479.4453,1562.4922,1483.4453,1558.4922" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="547.9424" x2="1485.4453" y1="1558.4922" y2="1558.4922"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="152.9404" x="554.9424" y="1553.4263">createSession(PARENT)</text></g><g class="message" data-participant-1="SessionManager" data-participant-2="DataStore"><polygon fill="#000000" points="1775.3638,1583.625,1785.3638,1587.625,1775.3638,1591.625,1779.3638,1587.625" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1491.4453" x2="1781.3638" y1="1587.625" y2="1587.625"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="172.0723" x="1498.4453" y="1582.5591">storeSession(sessionData)</text></g><g class="message" data-participant-1="AuthViewModel" data-participant-2="Audit"><polygon fill="#000000" points="1953.8066,1612.7578,1963.8066,1616.7578,1953.8066,1620.7578,1957.8066,1616.7578" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="547.9424" x2="1959.8066" y1="1616.7578" y2="1616.7578"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="107.7451" x="554.9424" y="1611.6919">logParentLogin()</text></g><g class="message" data-participant-1="AuthViewModel" data-participant-2="MainActivity"><polygon fill="#000000" points="382.2051,1641.8906,372.2051,1645.8906,382.2051,1649.8906,378.2051,1645.8906" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="376.2051" x2="546.9424" y1="1645.8906" y2="1645.8906"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="152.7373" x="388.2051" y="1640.8247">authenticated(PARENT)</text></g><g class="message" data-participant-1="MainActivity" data-participant-2="Parent"><polygon fill="#000000" points="185.9868,1671.0234,175.9868,1675.0234,185.9868,1679.0234,181.9868,1675.0234" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="179.9868" x2="370.2051" y1="1675.0234" y2="1675.0234"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="172.2183" x="191.9868" y="1669.9575">show caregiver dashboard</text></g><!--SRC=[dLPTRzem57tFhxZZPOdKQbsbQH8IanXTLJGweTBrtNLkmLfmCjkXwx_VjPsaiO52uONa-XxxtA_ZV30hN2DK1HCoIOmm1S9OcLMjFcgOYITwgoeuXzyQ5OnhyfP6S6P4AU6wA9yXtNm-WykBoo_d5r-p967Sb0ecAr7am3GC_9D53vgrELEqXrlqZvyczBSK6-jICKNRYugHnorH6dCZDiAyEFU-8NIrn1u4Fj-MEHREDx1iEozGRGJ7phLv3nqNo6j5P_MT8rkqiynLAVAV-A8fqcPtRuFM62A-YtADHWbkIJZ_pX9bEwQcDHblcMHBAendrZVjZkIsbCBMe1y9DCOGSSKCMtH1T6zn9dDXxXKJRSxfTP0aen5CQKl12jSyCrPBleBHA4byDvn_2sexR3rOLIL1qSangECG-0hv7rSmmmocMH9MdW1X6eQmH3EfbUspPeL0KVO8rGNe0EufV_L_JSQE0nIQMadGtWmv-T8O55sD0Fy9RJGmcSE65I9FW7xR5A98csqTejtS8RSY3dF9Nhi6ytHoCvrTPGuNPzRLOWXwHKFCNLrofbUF9LDvWeN67lzAK3g0-aR8zqSWww8uXdWjG-g7MQkIn4fZWTp9aUOAKIOeSzU2TtPrqQs-qNv-YrQhBBt1eJxKQAocsJFQ71y8hvTd8Gsg9yRHyMpqqC9Wp3bbrN5jp7l9zc07sIhyMwCs7cBNqkFepgU_W13gfSsjuql6w29uYo_QO2te4Cb-zTDAo9sp7OZlq4y7-S-5z91OikqneIYxlbG2D-YddA0trFSs8v5wxpgmwUdAWtOTjmNXvPeq4wq_wjIbmvrw1kwOt2vaNZ5iQXzw0xOTozwKkG6eNViyrNlcBLOkgYdbhfMv-VZknw_xRCzizmJIqMvHZJBPvMptgUvM649HBdsBpCgba6dsVYth4unxoM_TJbdxFH4hcitlD92mlULhBaN7-vekECp7nk2wCccslpXje1umFo5CIgK7fqV4YKgLgjExVHyEnwZ9OuSjR7MsHZNuJ8b6DKl2ZvYtvhJpJ7UFwh7jVM9hdzZMHxVqIUtyxbR-3m00]--></g></svg>