<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="STATE" height="1099px" preserveAspectRatio="none" style="width:951px;height:1099px;background:#FFFFFF;" version="1.1" viewBox="0 0 951 1099" width="951px" zoomAndPan="magnify"><title>LemonQwest App - Token Economy State Machine (v1, 2025-07)</title><defs/><g><g class="title" data-source-line="3"><text fill="#000000" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="794.9863" x="73.7389" y="35.4209">LemonQwest App - Token Economy State Machine (v1, 2025-07)</text></g><g id="UserRegistered"><rect fill="#FFFFFF" height="78.2031" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="148.5137" x="541.88" y="154.6094"/><line style="stroke:#000000;stroke-width:1;" x1="541.88" x2="690.3937" y1="180.9063" y2="180.9063"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="107.6797" x="562.297" y="172.6045">UserRegistered</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="107.1621" x="546.88" y="197.0449">tokenBalance = 0</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="53.8535" x="546.88" y="211.0137">level = 1</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="128.5137" x="546.88" y="224.9824">experiencePoints = 0</text></g><g id="TaskAssigned"><rect fill="#FFFFFF" height="78.2031" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="165.1191" x="533.58" y="309.8094"/><line style="stroke:#000000;stroke-width:1;" x1="533.58" x2="698.6991" y1="336.1063" y2="336.1063"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="95.8467" x="568.2162" y="327.8045">TaskAssigned</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="129.5039" x="538.58" y="352.2449">Task status = ACTIVE</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="145.1191" x="538.58" y="366.2137">tokenReward calculated</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="110.877" x="538.58" y="380.1824">based on difficulty</text></g><g id="TaskInProgress"><rect fill="#FFFFFF" height="64.2344" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="153.5645" x="206.35" y="465.0194"/><line style="stroke:#000000;stroke-width:1;" x1="206.35" x2="359.9145" y1="491.3162" y2="491.3162"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="106.1416" x="230.0614" y="483.0145">TaskInProgress</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="129.5156" x="211.35" y="507.4549">Child working on task</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="133.5645" x="211.35" y="521.4237">Timer may be running</text></g><g id="TaskCompleted"><rect fill="#FFFFFF" height="64.2344" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="146.3516" x="201.96" y="606.2494"/><line style="stroke:#000000;stroke-width:1;" x1="201.96" x2="348.3116" y1="632.5463" y2="632.5463"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="108.8896" x="220.691" y="624.2445">TaskCompleted</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="126.3516" x="206.96" y="648.6849">Completion recorded</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="114.8672" x="206.96" y="662.6537">Awaiting validation</text></g><g id="TokenValidation"><rect fill="#FFFFFF" height="92.1719" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="155.0234" x="352.63" y="747.4794"/><line style="stroke:#000000;stroke-width:1;" x1="352.63" x2="507.6534" y1="773.7763" y2="773.7763"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="112.9297" x="373.6769" y="765.4745">TokenValidation</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="132.9492" x="357.63" y="789.9149">Check fraud detection</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="135.0234" x="357.63" y="803.8837">Verify task completion</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="131.5605" x="357.63" y="817.8524">Calculate final reward</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="83.5488" x="357.63" y="831.8212">Log audit trail</text></g><g id="ValidationFailed"><rect fill="#FFFFFF" height="78.2031" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="151.9941" x="551.14" y="916.6594"/><line style="stroke:#000000;stroke-width:1;" x1="551.14" x2="703.1341" y1="942.9563" y2="942.9563"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="112.1299" x="571.0721" y="934.6545">ValidationFailed</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="116.2559" x="556.14" y="959.0949">No tokens awarded</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="131.9941" x="556.14" y="973.0637">Security event logged</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="74.9355" x="556.14" y="987.0324">COPPA audit</text></g><g id="TokensAwarded"><rect fill="#FFFFFF" height="78.2031" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="171.1836" x="344.54" y="916.6594"/><line style="stroke:#000000;stroke-width:1;" x1="344.54" x2="515.7236" y1="942.9563" y2="942.9563"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="111.7539" x="374.2548" y="934.6545">TokensAwarded</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="151.1836" x="349.54" y="959.0949">Tokens added to balance</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="76.7109" x="349.54" y="973.0637">User notified</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="112.6582" x="349.54" y="987.0324">Audit trail updated</text></g><ellipse cx="616.14" cy="67.6094" fill="#FFFFFF" rx="10" ry="10" style="stroke:#000000;stroke-width:1;"/><g id="TaskPaused"><rect fill="#FFFFFF" height="50" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="103.2207" x="405.53" y="613.3694"/><line style="stroke:#000000;stroke-width:1;" x1="405.53" x2="508.7507" y1="639.6663" y2="639.6663"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="83.2207" x="415.53" y="631.3645">TaskPaused</text></g><g id="TaskArchived"><rect fill="#FFFFFF" height="50" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="114.1104" x="686.08" y="472.1294"/><line style="stroke:#000000;stroke-width:1;" x1="686.08" x2="800.1904" y1="498.4263" y2="498.4263"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="94.1104" x="696.08" y="490.1245">TaskArchived</text></g><g id="TaskAbandoned"><rect fill="#FFFFFF" height="50" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1;" width="132.2734" x="12" y="613.3694"/><line style="stroke:#000000;stroke-width:1;" x1="12" x2="144.2734" y1="639.6663" y2="639.6663"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="112.2734" x="22" y="631.3645">TaskAbandoned</text></g><ellipse cx="528.14" cy="1082.8594" fill="none" rx="11" ry="11" style="stroke:#000000;stroke-width:1;"/><ellipse cx="528.14" cy="1082.8594" fill="#FFFFFF" rx="6" ry="6" style="stroke:#000000;stroke-width:1;"/><!--link *start* to UserRegistered--><g class="link" data-entity-1=".start." data-entity-2="UserRegistered" data-source-line="5" data-uid="lnk3" id="link_.start._UserRegistered"><path d="M616.14,77.9394 C616.14,93.9494 616.14,121.5094 616.14,148.2294" fill="none" id="*start*-to-UserRegistered" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="616.14,154.2294,620.14,145.2294,616.14,149.2294,612.14,145.2294,616.14,154.2294" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="108.2085" x="617.14" y="120.6763">User joins family</text></g><!--link UserRegistered to TaskAssigned--><g class="link" data-entity-1="UserRegistered" data-entity-2="TaskAssigned" data-source-line="13" data-uid="lnk4" id="link_UserRegistered_TaskAssigned"><path d="M616.14,232.9794 C616.14,256.2894 616.14,279.9794 616.14,303.3394" fill="none" id="UserRegistered-to-TaskAssigned" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="616.14,309.3394,620.14,300.3394,616.14,304.3394,612.14,300.3394,616.14,309.3394" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="126.5024" x="617.14" y="275.8763">Parent assigns task</text></g><!--link TaskAssigned to TaskInProgress--><g class="link" data-entity-1="TaskAssigned" data-entity-2="TaskInProgress" data-source-line="21" data-uid="lnk5" id="link_TaskAssigned_TaskInProgress"><path d="M533.1,362.5094 C483.05,372.5194 419.31,389.6894 368.14,418.0194 C346.39,430.0494 329.9299,444.4356 314.4499,460.5256" fill="none" id="TaskAssigned-to-TaskInProgress" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="310.29,464.8494,319.4124,461.1369,313.7566,461.2462,313.6473,455.5904,310.29,464.8494" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="105.4727" x="369.14" y="431.0863">Child starts task</text></g><!--link TaskAssigned to TaskPaused--><g class="link" data-entity-1="TaskAssigned" data-entity-2="TaskPaused" data-source-line="22" data-uid="lnk7" id="link_TaskAssigned_TaskPaused"><path d="M577.08,388.4494 C557.32,409.6094 534.19,437.1594 518.14,465.0194 C489.85,514.1094 472.8008,572.7074 464.2008,607.2174" fill="none" id="TaskAssigned-to-TaskPaused" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="462.75,613.0394,468.8076,605.2737,463.959,608.1878,461.045,603.3392,462.75,613.0394" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="148.9287" x="519.14" y="501.6963">Task paused by parent</text></g><!--link TaskAssigned to TaskArchived--><g class="link" data-entity-1="TaskAssigned" data-entity-2="TaskArchived" data-source-line="23" data-uid="lnk9" id="link_TaskAssigned_TaskArchived"><path d="M649.5,388.3294 C672.43,414.7294 698.2558,444.4593 717.9958,467.1893" fill="none" id="TaskAssigned-to-TaskArchived" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="721.93,471.7194,719.0488,462.3014,718.6515,467.9443,713.0086,467.547,721.93,471.7194" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="96.313" x="688.24" y="431.0863">Task cancelled</text></g><!--link TaskInProgress to TaskCompleted--><g class="link" data-entity-1="TaskInProgress" data-entity-2="TaskCompleted" data-source-line="30" data-uid="lnk10" id="link_TaskInProgress_TaskCompleted"><path d="M231.78,529.5194 C222.22,537.9094 213.54,547.8694 208.14,559.2494 C200.01,576.3594 205.6586,588.6553 220.2686,601.9253" fill="none" id="TaskInProgress-to-TaskCompleted" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="224.71,605.9594,220.7372,596.9473,221.0088,602.5977,215.3585,602.8692,224.71,605.9594" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="142.0542" x="209.14" y="572.3163">Child marks complete</text></g><!--link TaskInProgress to TaskPaused--><g class="link" data-entity-1="TaskInProgress" data-entity-2="TaskPaused" data-source-line="31" data-uid="lnk11" id="link_TaskInProgress_TaskPaused"><path d="M322.62,529.7294 C354.2,554.9994 393.1549,586.171 422.0649,609.301" fill="none" id="TaskInProgress-to-TaskPaused" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="426.75,613.0494,422.2213,604.3035,422.8458,609.9257,417.2235,610.5502,426.75,613.0494" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="81.8213" x="381.55" y="572.3163">Task paused</text></g><!--link TaskInProgress to TaskAbandoned--><g class="link" data-entity-1="TaskInProgress" data-entity-2="TaskAbandoned" data-source-line="32" data-uid="lnk13" id="link_TaskInProgress_TaskAbandoned"><path d="M206.06,508.4994 C170.91,516.8694 131.2,531.9794 104.14,559.2494 C89.94,573.5594 84.5133,589.8856 81.5833,606.9856" fill="none" id="TaskInProgress-to-TaskAbandoned" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="80.57,612.8994,86.0325,604.7042,81.4144,607.9712,78.1474,603.3531,80.57,612.8994" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="91.876" x="105.14" y="572.3163">Child gives up</text></g><!--link TaskCompleted to TokenValidation--><g class="link" data-entity-1="TaskCompleted" data-entity-2="TokenValidation" data-source-line="39" data-uid="lnk14" id="link_TaskCompleted_TokenValidation"><path d="M306.88,670.7394 C329.11,692.7094 354.9034,718.2008 379.7634,742.7808" fill="none" id="TaskCompleted-to-TokenValidation" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="384.03,746.9994,380.4425,737.8272,380.4745,743.4839,374.8177,743.516,384.03,746.9994" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="188.2397" x="353.64" y="713.5463">System validates completion</text></g><!--link TokenValidation to TokensAwarded--><g class="link" data-entity-1="TokenValidation" data-entity-2="TokensAwarded" data-source-line="48" data-uid="lnk15" id="link_TokenValidation_TokensAwarded"><path d="M430.14,840.0494 C430.14,864.0894 430.14,887.2994 430.14,910.2194" fill="none" id="TokenValidation-to-TokensAwarded" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="430.14,916.2194,434.14,907.2194,430.14,911.2194,426.14,907.2194,430.14,916.2194" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="136.6143" x="431.14" y="882.7263">Validation successful</text></g><!--link TokenValidation to ValidationFailed--><g class="link" data-entity-1="TokenValidation" data-entity-2="ValidationFailed" data-source-line="49" data-uid="lnk16" id="link_TokenValidation_ValidationFailed"><path d="M508.05,824.7094 C531.71,836.3494 556.59,851.3394 576.14,869.6594 C590.09,882.7294 598.7051,895.176 607.1851,911.066" fill="none" id="TokenValidation-to-ValidationFailed" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="610.01,916.3594,609.3016,906.536,607.6559,911.9482,602.2437,910.3026,610.01,916.3594" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="163.8013" x="591.53" y="882.7263">Fraud detected or invalid</text></g><!--link ValidationFailed to TaskAssigned--><g class="link" data-entity-1="ValidationFailed" data-entity-2="TaskAssigned" data-source-line="57" data-uid="lnk17" id="link_ValidationFailed_TaskAssigned"><path d="M703.33,934.9794 C768.95,912.8094 853.14,869.7194 853.14,794.5694 C853.14,496.1294 853.14,496.1294 853.14,496.1294 C853.14,421.6794 773.166,385.4406 704.826,367.1506" fill="none" id="ValidationFailed-to-TaskAssigned" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="699.03,365.5994,706.6899,371.7902,703.86,366.892,708.7582,364.0622,699.03,365.5994" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="89.3242" x="854.14" y="642.9363">Retry allowed</text></g><!--link ValidationFailed to *end*--><g class="link" data-entity-1="ValidationFailed" data-entity-2=".end." data-source-line="58" data-uid="lnk19" id="link_ValidationFailed_.end."><path d="M596.63,995.3094 C574.81,1022.8794 550.9118,1053.0732 538.4718,1068.8032" fill="none" id="ValidationFailed-to-*end*" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="534.75,1073.5094,543.4702,1068.9314,537.8515,1069.5876,537.1953,1063.9689,534.75,1073.5094" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="127.626" x="572.71" y="1037.9263">Account suspended</text></g><!--link TokensAwarded to *end*--><g class="link" data-entity-1="TokensAwarded" data-entity-2=".end." data-source-line="66" data-uid="lnk20" id="link_TokensAwarded_.end."><path d="M460.34,995.3094 C481.94,1022.8794 505.5704,1053.0557 517.8904,1068.7857" fill="none" id="TokensAwarded-to-*end*" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="521.59,1073.5094,519.1896,1063.9575,518.507,1069.573,512.8915,1068.8903,521.59,1073.5094" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="24.7051" x="497.44" y="1037.9263">End</text></g><!--SRC=[TLN1ZjCm4BtdAuOR82frLq98I225gYkjj43fTdj175nxafewTcGxBH7YtncxJPCsxgcn_TxCc-Vnz9NVOeLGAoPrbddf5S8JLaR_EA3paDSrJ61bTgXXpeqsLGlFddc4hunlfKPulRzx1_VJ-_UJwOStMVRpxI-OJ3x3YqExn58wZnO5V8mRyDj8xQ1WbLHjbhaOw0hvDuCnsGS1NvXYcYDyWcaAet2FYWxlKeVufqOhaUWBak1T3F8loww0GVcAkLtkd2nrP2wOHUs1nHq7dauxvHV8eFkA6fOGe4t8byzMZ-lv61LhM-A1MG6SATueYYt6k0rpz6iq25aKac2-3HLSe3hzZtfXJMdHEIBEjbA9eCFwa_uaPy4QrykkZwjDIr_1W3GdjzG4-vx5mmKfHV875Wt4T2Obz1sCtKbTXWAZnWHm9IlgeOgri46mZTQ4xomO03jnCrFL2drKTynHCRjpm4_xjtWf8svXymtJmkX1ZfBySD3KGmTw9Pq15zgEtv8gjyYD5UVR7wBo0vC-6BHdIWeMu5tjFIpA2lsqFeE8-jnIUrST4SyEX12ToYjIr3aADDiYtq5XMID0K48UGwIGQtfjHHjlSfWj6RJhUIYaPeey24yX2Nqo9L1kwS5R9bMi_mfqTi3b8KoqRd3i6ixf_ef69Pdzye7YH_B3eDhm_Yn87Ptih1jnWdU9GD_CyQaxO4TbQTWpyiPAtmADCvexofJbBUZi-sAH7mq9LemGYMcsH6zRO4gP0qLDCi84ftRZt3IKtpMkHYq6B_h2t7EV3EnUdQeKOUaD3QuujnF8-9-WZPU5H94up_kxfXSbubpixlmCwpNFjSZ-0m00]--></g></svg>